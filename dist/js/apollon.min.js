/*
 *  https://tomyvinci.github.io/apollon/
 *
 *  Document   : apollon.js
 *  Author     : Tomy Vinci 
 *  Description: The javascript file of Apollon
 *  Version    : v1.0.0 / Free
 *
*/
"undefined"!=typeof jQuery?function(t){t.fn.apollon=function(l){var o=t.extend({tableID:1,tableName:"Apollon",distloc:"",datatype:"html",showmode:"table",showcode:"",theme:1,ajaxload:!1,data_url:"",data:{},hide_md:[],hide_sm:[],functions:[],specialsort:[],tolist:[],filters:[],filterMaxNum:20,toimg:[],sortnbr:[],trufalse:[],action:[],columns:[],toshow:[10,25,50,100,200,500],tosort:[],loading:0,loadtxt:"Apollon",pagination:1,callback:function(){},callbackAjax:function(){},exportCSV:!1,exportXML:!1,exportPDF:!1,exportSQL:!1,english:{nodata:"No data to show !",loading:"Loading...",show_1:"Show",line_1:"entries",search:"Search",show_2:"Showing",tooo_1:"to",ooof_1:"of",line_2:"entries",noexport:"To export, you have to include exportation plugins",refresh:"Refresh",export:"Export",listmod:"Normal View",tablemod:"Table View",toshow:"To show",functions:"Functions",stats:"Statistics",graph:"Graph",selection:"Select",filtring:"Filtering",print:"Print",column:"Column",operation:"operation",value:"Value",show:"Show",abscis:"Abscissa",coordo:"Coordinates",error:"Error",typ:"Type",sum:"Sum",avg:"Average",max:"Max",min:"Min",nbr:"Number",ext:"Extent",q1:"Q1",q2:"Median",q3:"Q3",iqr:"IQR",draw:"Graph",count:"Number of times",points:"Points",lines:"Lines",lines_bg:"Lines - background",lines_step:"Lines - steps",bars:"Bars",circle:"Circle",nofilter:"Delete"},lang:"en"},l);return this.each(function(){var l=t(this).attr("id"),a=[],e=[],n=[],i=[],s=[],r=[],d={},c="list"==o.showmode||"html"==o.showmode?0:1,h=0,p=0,f=1,m=10,u=0,v=0,$=0,b=0,g=0,x="",_=!1,w="",C=function(t,l){var a,e,n=o.sortnbr,i=o.specialsort,s=t[0].replace("sort_","");return"Bon"!=o.sortnbr?function(o,r){return(a=o[t],e=r[t],"number"!=typeof a&&"number"!=typeof e&&(n.indexOf(t)>=0||i.indexOf(s)>=0)&&(a=void 0!==a&&null!=a?a.toString().replace(" ",""):0,e=void 0!==e&&null!=e?e.toString().replace(" ",""):0,a=parseInt(a),e=parseInt(e)),"ordre"==t&&(a=parseInt(a),e=parseInt(e)),1==l)?a>e?1:a<e?-1:0:a<e?1:a>e?-1:0}:function(o,n){return(a=o[t],e=n[t],1==l)?a>e?1:a<e?-1:0:a<e?1:a>e?-1:0}},y=function(t,l,a){"asc"==a.toLowerCase()&&(a=1),"desc"==a.toLowerCase()&&(a=0),o.specialsort.indexOf(l)>=0&&(l="sort_"+l),"undefined"!=typeof Storage&&(window.localStorage.setItem("apollontable_"+tc+"_o",a),window.localStorage.setItem("apollontable_"+tc+"_c",l)),e.sort(C(l,a)),F(t)},k=function(t){var l;b=o.tosort,g=1-g,o.specialsort.indexOf(b)>=0&&(b="sort_"+b),"undefined"!=typeof Storage&&(window.localStorage.setItem("apollontable_"+tc+"_o",g),window.localStorage.setItem("apollontable_"+tc+"_c",b)),e.sort(C(b,g)),T(t)},O=function(t){return t=(t=t.toLowerCase()).replace(/[^0-9a-z]/gi,"")},I=function(o,n){var i={},s="",r="";t('.apollon-sidebar a[data-filter="'+o+'"][data-value="'+n+'"]').parent().parent().find("a").removeClass("selected"),t('.apollon-sidebar a[data-filter="'+o+'"][data-value="'+n+'"]').addClass("selected"),t('.apollon-sidebar a[data-filter="'+o+'"][data-value="'+n+'"]').parent().parent().find("a span").removeClass("apollon-circle").removeClass("apollon-circle-empty").addClass("apollon-circle-empty"),t('.apollon-sidebar a[data-filter="'+o+'"][data-value="'+n+'"] span').addClass("apollon-circle").removeClass("apollon-circle-empty");for(var d,c=t("#apollon-sidebar ul"),h=0;h<c.length;h++)s=t(d=c[h]).find("li a.selected").attr("data-filter"),r=t(d).find("li a.selected").attr("data-value"),void 0!==s&&void 0!==r&&s.length>0&&r.length>0&&(i[s]=r);if(Object.keys(i).length>0){var b,g=[];for(var h in a){for(var x in tb=a[h],b=1,i)tb[x]!=i[x]&&(b=0);1==b&&g.push(a[h])}p=Math.ceil((u=(e=g).length)/m),f=1,v=0,$=u>m?m:u,F(l)}else e=a,p=Math.ceil((u=a.length)/m),f=1,v=0,$=u>m?m:u,F(l)},j=function(l){t(".column100").unbind("mouseover").on("mouseover",function(){var l=t(this).parent().parent().parent(),o=t(this).parent().parent(),a=t(l).data("vertable")+"",e=t(this).data("column")+"";t(o).find("."+e).addClass("hov-column-"+a),t(l).find(".row100.head ."+e).addClass("hov-column-head-"+a),t(l).find(".row100.foot ."+e).addClass("hov-column-head-"+a)}),t(".column100").unbind("mouseout").on("mouseout",function(){var l=t(this).parent().parent().parent(),o=t(this).parent().parent(),a=t(l).data("vertable")+"",e=t(this).data("column")+"";t(o).find("."+e).removeClass("hov-column-"+a),t(l).find(".row100.head ."+e).removeClass("hov-column-head-"+a),t(l).find(".row100.foot ."+e).removeClass("hov-column-head-"+a)}),t("#"+l+'dropone [type="checkbox"]').unbind("change").change(function(){i=[];for(var o=t("#"+l+"dropone").find('[type="checkbox"]'),a=0;a<o.length;a++){var e=t(o[a]).attr("name");!0==t(o[a]).prop("checked")&&i.push(e)}"undefined"!=typeof Storage&&window.localStorage.setItem("apollontable_"+tc+"_1",JSON.stringify(i)),F(l)}),t("#"+l+'droptwo [type="checkbox"]').unbind("change").change(function(){s=[];for(var o=t("#"+l+"droptwo").find('[type="checkbox"]'),a=0;a<o.length;a++){var e=t(o[a]).attr("name");!0==t(o[a]).prop("checked")&&s.push(e)}"undefined"!=typeof Storage&&window.localStorage.setItem("apollontable_"+tc+"_2",JSON.stringify(s))}),t("#"+l+"-txt1").unbind("change").change(function(){m=parseInt(t(this).val()),p=Math.ceil(u/m),f=1,v=0,$=m<u?m:u,"undefined"!=typeof Storage&&window.localStorage.setItem("apollontable_"+tc+"_n",m),F(l)}),t("#"+l+"table .head th, #"+l+"table .foot th").unbind("click").click(function(){var a;b=t(this).html(),g=1-g,o.specialsort.indexOf(b)>=0&&(b="sort_"+b),"undefined"!=typeof Storage&&(window.localStorage.setItem("apollontable_"+tc+"_o",g),window.localStorage.setItem("apollontable_"+tc+"_c",b)),e.sort(C(b,g)),F(l)}),t("#"+l+"-txt2 input").unbind("keyup").keyup(function(i){x=t(this).val(),that=this;let r=x.charAt(x.length-1);"-"==r&&(x=x.substring(0,x.length-1)),e=[],u=a.length;for(var d=0,c=0;c<u;c++){for(var h=a[c],b="",g=0;g<n.length;g++){var _=h[n[g]];s.indexOf(n[g])>=0&&(b=b+_+"-")}var w="--"==r?RegExp(x+"-","gi"):RegExp(x,"gi");result=b.match(w),(result=(b.match(w)||[]).length)>0&&(e.push(a[c]),d++)}if(0==x.length?(e=a,u=a.length,f=1,p=Math.ceil(u/m),v=0,$=u>m?m:u):(p=Math.ceil((u=d)/m),f=1,v=0,$=u>m?m:u),i.keyCode||i.which,"undefined"!=typeof Storage){var C=o.tableID;window.localStorage.setItem("apollontable_"+C+"_r",x)}k(l),F(l);var y=t("#"+l+"-txt2 input"),O=2*y.val().length;y.focus(),y[0].setSelectionRange(O,O)}),t("#"+l+"-refresh").unbind("click").click(function(){"ajax"==o.datatype?M(l):(e=a,p=Math.ceil((u=a.length)/m),f=1,v=0,$=u>m?m:u,k(l),T(l))}),t("#"+l+"-print").unbind("click").click(function(){B(l)}),t("#"+l+"-what2show").unbind("click").click(function(){H(l)}),t("#"+l+"-selfilterz").unbind("click").click(function(){U(l)}),t("#"+l+"-drawgraph").unbind("click").click(function(){J(l)}),t("#"+l+"-listable").unbind("click").click(function(){W(l)}),t("#"+l+"-func-a").unbind("click").click(function(){funcCalc(l)}),t("#"+l+"-func-v").unbind("click").click(function(){Y(l)}),t("#"+l+"-func-c").unbind("click").click(function(){funcVarEca(l)}),t("#"+l+"-func-d").unbind("click").click(function(){funcDevia(l)}),t("#"+l+"-func-e").unbind("click").click(function(){funcAbsDev(l)}),t("#"+l+"-export-csv").unbind("click").click(function(){Q(l)}),t("#"+l+"-export-msexcel").unbind("click").click(function(){V(l)}),t("#"+l+"-export-xml").unbind("click").click(function(){P(l)}),t("#"+l+"-export-pdf").unbind("click").click(function(){X(l)}),t("#"+l+"-export-sql").unbind("click").click(function(){R(l)}),jQuery().tooltipster&&t(".tooltipster").tooltipster({theme:"tooltipster-shadow",animation:"fade",delay:200,interactive:!0,repositionOnScroll:!0,contentAsHTML:!0,content:lng.loading,functionBefore:function(l,o){var a=t(o.origin),e=a.attr("data-id"),n=a.attr("data-val"),i=a.attr("data-url");!0!==a.data("loaded")&&t.post(i,{id:e,val:n},function(t){l.content(t),a.data("loaded",!0)})}}),t("#"+l+"dropone-btn").unbind("click").click(function(){S(l),q(l)}),t("#"+l+"droptwo-btn").unbind("click").click(function(){S(l),D(l)}),t("#"+l+"dropthree-btn").unbind("click").click(function(){S(l),N(l)}),t("#"+l+"-fullscr").unbind("click").click(function(){0==parseInt(t(this).attr("name"))?(t("body").removeClass("apollontablefull").addClass("apollontablefull"),t("#"+l+"table").parent().parent().parent().parent().removeClass("apollontable-fullfixed").addClass("apollontable-fullfixed"),t(this).attr("name",1),t(this).html('<i class="apollon-resize-small"></i>')):(t("body").removeClass("apollontablefull"),t("#"+l+"table").parent().parent().parent().parent().removeClass("apollontable-fullfixed"),t(this).attr("name",0),t(this).html('<i class="apollon-resize-full"></i>'))}),t('[data-typ="filter"]').unbind("click").click(function(){var l=t(this).attr("data-filter"),o=t(this).attr("data-value");I(l,o)}),t("#"+l+"-txt4 .pagination a").unbind("click").click(function(){f=parseInt(t(this).attr("name")),($=(v=parseInt((f-1)*m))+parseInt(m))>u&&($=u),t("#"+l+"-txt4 .pagination a").removeClass("is-active"),t("#"+l+'-txt4 .pagination a[name="'+f+'"]').addClass("is-active"),"undefined"!=typeof Storage&&window.localStorage.setItem("apollontable_"+tc+"_p",f),F(l)}),window.onclick=function(t){var o=document.getElementsByClassName("dropbtn")[0].contains(t.target),a=document.getElementsByClassName("dropbtn")[1].contains(t.target),e=document.getElementsByClassName("dropbtn")[2].contains(t.target);o||a||e||S(l)}},S=function(l){t(".dropdown-content").removeClass("show")},q=function(l){t("#"+l+"dropone").removeClass("show").addClass("show")},D=function(l){t("#"+l+"droptwo").removeClass("show").addClass("show")},N=function(l){t("#"+l+"dropthree").removeClass("show").addClass("show")},T=function(t){E(t)},E=function(l){t("#"+l).parent().html('<div id="'+l+'-block" class="apollon-block tomythem-1"></div>');for(var a='<div class="row apollon-details"><div class="col-md-6 col-sm-12"><label><div class="dropdown" id="dropdown-1"><button id="'+l+'dropone-btn" class="dropbtn"><i class="apollon-eye"></i></button><div id="'+l+'dropone" class="dropdown-content">',r=0;r<n.length;r++)E=r+1,n[r]==b&&(M=0==g?" tobot":" totop"),a+='<a href="javascript:;"><div class="checkbox checkbox-primary"><label><input class="styled" type="checkbox"'+(i.indexOf(n[r])>-1?' checked="checked"':"")+' name="'+n[r]+'"><span>'+n[r]+"</span></label></div></a>";a+="</div></div>",a+='<select class="custom-select custom-select-sm form-control form-control-sm" id="'+l+'-txt1">';for(var d=o.toshow,r=0;r<d.length;r++)a+='<option value="'+d[r]+'"'+(d[r]==m?" selected":"")+">"+d[r]+"</option>";a+="</select></label></div>",a+='<div class="col-md-6 col-sm-12 text-right"><div id="'+l+'-txt2"><label><input type="search" class="form-control form-control-sm" placeholder="'+lng.search+'" value="'+(null!=x?x:"")+'"><div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups"><div class="btn-group me-2" role="group" aria-label="Second group"><div class="dropdown left-drop" id="dropdown-2"><button id="'+l+'droptwo-btn" class="dropbtn"><i class="apollon-search"></i></button><div id="'+l+'droptwo" class="dropdown-content">';for(var r=0;r<n.length;r++)E=r+1,n[r]==b&&(M=0==g?" tobot":" totop"),a+='<a href="javascript:;"><div class="checkbox checkbox-primary"><label><input class="styled" type="checkbox"'+(s.indexOf(n[r])>-1?' checked="checked"':"")+' name="'+n[r]+'"><span>'+n[r]+"</span></label></div></a>";a+='</div></div><div class="dropdown left-drop" id="dropdown-3"><button id="'+l+'dropthree-btn" class="dropbtn"><i class="apollon-ellipsis"></i></button><div id="'+l+'dropthree" class="dropdown-content"></div></div><button type="button" class="btn btn-primary" id="'+l+'-fullscr" name="0"><i class="apollon-resize-full"></i></button></div></div></label></div></div></div>',a+='<div class="row apollon-filters hidden" id="'+l+'-filters"></div></div><div class="apollon-content table100 tomythem-'+o.theme+'">';var c=o.filters.length>0;if(a+='<div class="apollon-sidebar'+(c?"":" hidden")+'" id="apollon-sidebar"></div>',a+='<div class="table-responsive'+(c?" withsidebar":"")+'" id="'+l+'-allContent">',a+="</div></div>",a+='<div class="row apollon-details"><div class="col-md-6 col-sm-12 '+l+'-txt3" id="'+l+'-txt3"></div><div class="col-md-6 col-sm-12 text-right"><div class="dataTables_paginate paging_simple_numbers" id="'+l+'-txt4"></div></div></div></div>',t("#"+l+"-block").html(a),a="","list"==o.showmode){if(e.length>0){a="",E=0;for(var h=$<u?$:u,p=o.tolist,f=o.toimg,_=o.trufalse,w=o.action,r=v;r<h;r++){var C=e[r];a+='<dl class="tomylist dl-horizontal"'+(void 0!==C.color?' data-color="'+C.color+'"':"")+(void 0!==C.ID?' data-id="'+C.ID+'"':"")+">";for(var y=0;y<n.length;y++){E=y+1;var k=C?.[n[y]];if(hide_cls="",i.indexOf(n[y])>=0&&void 0!==k){if(a+='<dt class="column100 column'+E+hide_cls+'" data-column="column'+E+'" data-label="'+n[y]+'">'+n[y]+'</dt><dd class="column100 column'+E+hide_cls+'" data-column="column'+E+'" data-label="'+n[y]+'">',w.indexOf(n[y])>=0){if(void 0===k){var O=k;a+='<a id="'+O.id+'" href="javascript:'+O.click+';" class="apollonbtn btn-'+O.color+'">'+O.content+"</a>"}else for(var I=0;I<k.length;I++){var O=k[I];O?.tooltip!==void 0?a+='<a id="'+O.id+"-"+O.toolid+'" data-url="sources/ajax/load/'+O.tooltip+'.php" data-id="'+O.toolid+'" data-val="0" href="'+O.click+'" target="_blank" class="apollonbtn btn-'+O.color+' tooltipster">'+O.content+"</a>":a+='<a id="'+O.id+'" href="javascript:'+O.click+';" class="apollonbtn btn-'+O.color+'">'+O.content+"</a>"}}else if(p.indexOf(n[y])>=0){a+='<ul class="'+l+'-list">';for(var I=0;I<k.length;I++){var O=k[I];a+="<li>"+O+"</li>"}a+="</ul>"}else if(f.indexOf(n[y])>=0){var j=void 0!==k.src?' src="'+k.src+'"':"",S=void 0!==k.alt?' alt="'+k.alt+'"':"",q=void 0!==k.id?' id="'+k.id+'"':"",D=void 0!==k.class?' class="'+k.class+" "+l+'-image"':' class="'+l+'-image"';a+="<img"+j+S+q+D+" />"}else _.indexOf(n[y])>=0?a+=!0===k?'<i class="apollon-ok-circled"></i>':'<i class="apollon-circle-empty"></i>':a+=k;a+="</dd>"}}a+='</dl><hr class="small-hr"/>'}t("#"+l+"-allContent").html(a),t("#"+l+"-txt3").html(lng.show_2+" "+v+" "+lng.tooo_1+" "+h+" "+lng.ooof_1+" "+u+" "+lng.line_2)}else a='<hr class="small-hr" /><dl class="tomylist dl-horizontal" wfd-id="10"><dt>!!!</dt><dd>'+lng.nodata+'</dd></dl><hr class="small-hr" />',t("#"+l+"-txt3").html(lng.nodata),t("#"+l+"-allContent").html(a),t("#"+l+"-allContent").removeClass("withsidebar"),t("#"+l+"-allContent").parent().find(".apollon-sidebar").remove()}else if("html"==o.showmode){t("#"+l+"-allContent").html('<div id="'+l+'x" class="row nomarg"></div>'),t("#"+l+"x").addClass("row nomarg");var N=o.showcode;a="",E=0;for(var h=$<u?$:u,p=o.tolist,f=o.toimg,_=o.trufalse,w=o.action,r=v;r<h;r++){for(var C=e[r],T=N,y=0;y<n.length;y++){E=y+1;var k=C[n[y]];T=T.replaceAll("["+n[y].toUpperCase()+"]",k)}a+=T}t("#"+l+"x").html(a),e.length>0||(a='<hr class="small-hr" /><dl class="tomylist dl-horizontal" wfd-id="10"><dt>!!!</dt><dd>'+lng.nodata+'</dd></dl><hr class="small-hr" />',t("#"+l+"-txt3").html(lng.nodata),t("#"+l+"-allContent").html(a),t("#"+l+"-allContent").removeClass("withsidebar"),t("#"+l+"-allContent").parent().find(".apollon-sidebar").remove())}else{a+='<table id="'+l+'table" class="table table-apollon table-striped table-sm" data-vertable="tomythem-'+o.theme+'"><thead><tr class="row100 head">';for(var E=0,F=o.hide_sm,A=o.hide_md,r=0;r<n.length;r++){E=r+1;var M="";n[r]==b&&(M=0==g?" tobot":" totop"),hide_cls="",F.indexOf(n[r])>=0&&(hide_cls+=" hidden-sm"),A.indexOf(n[r])>=0&&(hide_cls+=" hidden-md"),i.indexOf(n[r])>=0&&(a+='<th class="column100 column'+E+M+hide_cls+'" data-column="column'+E+'" scope="col">'+n[r]+"</th>")}a+='</tr></thead><tfoot><tr class="row100 foot">';for(var E=0,F=o.hide_sm,A=o.hide_md,r=0;r<n.length;r++){E=r+1;var M="";n[r]==b&&(M=0==g?" tobot":" totop"),hide_cls="",F.indexOf(n[r])>=0&&(hide_cls+=" hidden-sm"),A.indexOf(n[r])>=0&&(hide_cls+=" hidden-md"),i.indexOf(n[r])>=0&&(a+='<th class="column100 column'+E+M+hide_cls+'" data-column="column'+E+'" scope="col">'+n[r]+"</th>")}if(a+="</tr></tfoot><tbody></tbody></table>",t("#"+l+"-allContent").html(a),e.length>0){a="",E=0;for(var h=$<u?$:u,p=o.tolist,f=o.toimg,_=o.trufalse,w=o.action,r=v;r<h;r++){var C=e[r];a+='<tr class="row100"'+(C?.color!==void 0?' data-color="'+C.color+'"':"")+(C?.ID!==void 0?' data-id="'+C.ID+'"':"")+">";for(var y=0;y<n.length;y++){E=y+1;var k=C?.[n[y]];if(hide_cls="",F.indexOf(n[y])>=0&&(hide_cls+=" hidden-sm"),A.indexOf(n[y])>=0&&(hide_cls+=" hidden-md"),i.indexOf(n[y])>=0&&void 0!==k){if(a+='<td class="column100 column'+E+hide_cls+'" data-column="column'+E+'" data-label="'+n[y]+'">',w.indexOf(n[y])>=0){if(void 0===k){var O=k;a+='<a id="'+O.id+'" href="javascript:'+O.click+';" class="apollonbtn btn-'+O.color+'">'+O.content+"</a>"}else for(var I=0;I<k.length;I++){var O=k[I];O?.tooltip!==void 0?a+='<a id="'+O.id+"-"+O.toolid+'" data-url="sources/ajax/load/'+O.tooltip+'.php" data-id="'+O.toolid+'" data-val="0" href="'+O.click+'" target="_blank" class="apollonbtn btn-'+O.color+' tooltipster">'+O.content+"</a>":a+='<a id="'+O.id+'" href="javascript:'+O.click+';" class="apollonbtn btn-'+O.color+'">'+O.content+"</a>"}}else if(p.indexOf(n[y])>=0){a+='<ul class="'+l+'-list">';for(var I=0;I<k.length;I++){var O=k[I];a+="<li>"+O+"</li>"}a+="</ul>"}else if(f.indexOf(n[y])>=0){var j=k?.src!=="undefined"?' src="'+k.src+'"':"",S=k?.alt!=="undefined"?' alt="'+k.alt+'"':"",q=k?.id!=="undefined"?' id="'+k.id+'"':"",D=k?.class!=="undefined"?' class="'+k.class+" "+l+'-image"':' class="'+l+'-image"';a+="<img"+j+S+q+D+" />"}else _.indexOf(n[y])>=0?a+=!0===k?'<i class="apollon-ok-circled"></i>':'<i class="apollon-circle-empty"></i>':a+=k;a+="</td>"}}a+="</tr>"}t("#"+l+"-allContent table tbody").html(a),t("#"+l+"-txt3").html(lng.show_2+" "+v+" "+lng.tooo_1+" "+h+" "+lng.ooof_1+" "+u+" "+lng.line_2)}else a='<tr class="row100"><td class="column100 column1" data-column="column1" colspan="'+t("#"+l+"-allContent table thead tr th").length+'">'+lng.nodata+"</td></td>",t("#"+l+"-allContent table tbody").html(a),t("#"+l+"-txt3").html(lng.nodata),t("#"+l+" tbody").html(a),t("#"+l+"-allContent").removeClass("withsidebar"),t("#"+l+"-allContent").parent().find(".apollon-sidebar").remove()}L(l)},L=function(l){var a="";a+='<a href="javascript:;" id="'+l+'-refresh"><i class="apollon-arrows-cw"></i>'+lng.refresh+"</a>",jQuery().tableExport&&(a+='<div class="like-a"><i class="apollon-download-cloud"></i> '+lng.export+'<i class="apollon-angle-right"></i><div class="second-stage">',o.exportCSV&&(a+='<a href="javascript:;" id="'+l+'-export-csv">CSV</a>'),a+='<a href="javascript:;" id="'+l+'-export-msexcel">Excel</a>',o.exportXML&&(a+='<a href="javascript:;" id="'+l+'-export-xml">XML</a>'),o.exportPDF&&(a+='<a href="javascript:;" id="'+l+'-export-pdf">PDF</a>'),o.exportSQL&&(a+='<a href="javascript:;" id="'+l+'-export-sql">SQL</a>'),a+="</div></div>"),"list"==o.showmode||"html"==o.showmode?a+='<a href="javascript:;" id="'+l+'-listable"><i class="apollon-table"></i> '+lng.tablemod+"</a>":a+='<a href="javascript:;" id="'+l+'-listable"><i class="apollon-list-bullet"></i> '+lng.listmod+"</a>",a+='<a href="javascript:;" id="'+l+'-what2show"><i class="apollon-sliders"></i> '+lng.selection+"</a>",a+='<a href="javascript:;" id="'+l+'-selfilterz"><i class="apollon-filter"></i> '+lng.filtring+"</a>",o.functions.length>0&&(a+='<div class="like-a"><i class="apollon-calc"></i> '+lng.functions+'<i class="apollon-angle-right"></i><div class="second-stage">',a+='<a href="javascript:;" id="'+l+'-func-v">'+lng.stats+"</a>",a+="</div></div>"),jQuery().plot&&(a+='<a href="javascript:;" id="'+l+'-drawgraph"><i class="apollon-chart-bar"></i> '+lng.graph+"</a>"),a+='<a href="javascript:;" id="'+l+'-print"><i class="apollon-print"></i> '+lng.print+"</a>",t("#"+l+"dropthree").html(a);var e=o.filters,n=o.filterMaxNum;if(e.length>0){for(tp in a="",nbractx=0,d){a+="<ul><li><h5>"+tp+'</h5></li><li class="itm-sect itm-sect-no_filter"><a class="mail-no_filter" href="javascript:;" data-typ="filter" data-filter="" data-value=""><span class="apollon-circle"></span>nofilter <em class="text-muted filter-number"></em></a></li>';for(var i=d[tp],s=0;s<i.length;s++)i[s].length>0&&nbractx++,i[s]=i[s].replace(/<\/?[^>]+(>|$)/g,""),nbractx<=n&&i[s].length>0&&(a+='<li class="itm-sect itm-sect-'+O(tp)+"_"+O(i[s])+'"><a class="mail-'+O(tp)+"_"+O(i[s])+'" href="javascript:;" data-typ="filter" data-filter="'+tp+'" data-value="'+i[s]+'"><span class="apollon-circle-empty"></span>'+i[s]+' <em class="text-muted filter-number"></em></a></li>');a+="</ul>"}t("#apollon-sidebar").html(a);var r=t("#apollon-sidebar").height(),c=t("#"+l+"-allContent").height();r>c?t("#"+l+"-allContent").css({height:r+"px"}):t("#"+l+"-allContent").css({height:"auto"})}A(l)},F=function(l){var a="",s=o.showmode;if(1==c&&(s="table"),0==c&&"list"!=s&&"html"!=s&&(s="list"),"list"==s){if(e.length>0){a="",D=0;for(var r=$<u?$:u,d=o.tolist,h=o.toimg,p=o.trufalse,f=o.action,m=v;m<r;m++){var x=e[m];a+='<dl class="tomylist dl-horizontal"'+(x?.color!==void 0?' data-color="'+x.color+'"':"")+(x?.ID!==void 0?' data-id="'+x.ID+'"':"")+">";for(var _=0;_<n.length;_++){D=_+1;var w=x?.[n[_]];if(hide_cls="",i.indexOf(n[_])>=0&&void 0!==w){if(a+='<dt class="column100 column'+D+hide_cls+'" data-column="column'+D+'" data-label="'+n[_]+'">'+n[_]+'</dt><dd class="column100 column'+D+hide_cls+'" data-column="column'+D+'" data-label="'+n[_]+'">',f.indexOf(n[_])>=0){if(void 0===w){var C=w;a+='<a id="'+C.id+'" href="javascript:'+C.click+';" class="apollonbtn btn-'+C.color+'">'+C.content+"</a>"}else for(var y=0;y<w.length;y++){var C=w[y];C?.tooltip!==void 0?a+='<a id="'+C.id+"-"+C.toolid+'" data-url="sources/ajax/load/'+C.tooltip+'.php" data-id="'+C.toolid+'" data-val="0" href="'+C.click+'" target="_blank" class="apollonbtn btn-'+C.color+' tooltipster">'+C.content+"</a>":a+='<a id="'+C.id+'" href="javascript:'+C.click+';" class="apollonbtn btn-'+C.color+'">'+C.content+"</a>"}}else if(d.indexOf(n[_])>=0){a+='<ul class="'+l+'-list">';for(var y=0;y<w.length;y++){var C=w[y];a+="<li>"+C+"</li>"}a+="</ul>"}else if(h.indexOf(n[_])>=0){var k=w?.src!==void 0?' src="'+w.src+'"':"",O=w?.alt!==void 0?' alt="'+w.alt+'"':"",I=w?.id!==void 0?' id="'+w.id+'"':"",j=w?.class!==void 0?' class="'+w.class+" "+l+'-image"':' class="'+l+'-image"';a+="<img"+k+O+I+j+" />"}else p.indexOf(n[_])>=0?a+=!0===w?'<i class="apollon-ok-circled"></i>':'<i class="apollon-circle-empty"></i>':a+=w;a+="</dd>"}}a+='</dl><hr class="small-hr"/>'}t("#"+l+"-allContent").html(a),t("#"+l+"-txt3").html(lng.show_2+" "+v+" "+lng.tooo_1+" "+r+" "+lng.ooof_1+" "+u+" "+lng.line_2)}else a='<hr class="small-hr" /><dl class="tomylist dl-horizontal" wfd-id="10"><dt>!!!</dt><dd>'+lng.nodata+'</dd></dl><hr class="small-hr" />',t("#"+l+"-txt3").html(lng.nodata),t("#"+l+"-allContent").html(a),t("#"+l+"-allContent").removeClass("withsidebar"),t("#"+l+"-allContent").parent().find(".apollon-sidebar").remove()}else if("html"==s){t("#"+l+"-allContent").html('<div id="'+l+'x" class="row nomarg"></div>'),t("#"+l+"x").addClass("row nomarg");var S=o.showcode;a="",D=0;for(var r=$<u?$:u,d=o.tolist,h=o.toimg,p=o.trufalse,f=o.action,m=v;m<r;m++){for(var x=e[m],q=S,_=0;_<n.length;_++){D=_+1;var w=x[n[_]];q=q.replaceAll("["+n[_].toUpperCase()+"]",w)}a+=q}t("#"+l+"x").html(a),e.length>0||(a='<hr class="small-hr" /><dl class="tomylist dl-horizontal" wfd-id="10"><dt>!!!</dt><dd>'+lng.nodata+'</dd></dl><hr class="small-hr" />',t("#"+l+"-txt3").html(lng.nodata),t("#"+l+"-allContent").html(a),t("#"+l+"-allContent").removeClass("withsidebar"),t("#"+l+"-allContent").parent().find(".apollon-sidebar").remove())}else{a+='<table id="'+l+'table" class="table table-apollon table-striped table-sm" data-vertable="tomythem-'+o.theme+'"><thead><tr class="row100 head">';for(var D=0,N=o.hide_sm,T=o.hide_md,m=0;m<n.length;m++){D=m+1;var E="";n[m]==b&&(E=0==g?" tobot":" totop"),hide_cls="",N.indexOf(n[m])>=0&&(hide_cls+=" hidden-sm"),T.indexOf(n[m])>=0&&(hide_cls+=" hidden-md"),i.indexOf(n[m])>=0&&(a+='<th class="column100 column'+D+E+hide_cls+'" data-column="column'+D+'" scope="col">'+n[m]+"</th>")}a+='</tr></thead><tfoot><tr class="row100 foot">';for(var D=0,N=o.hide_sm,T=o.hide_md,m=0;m<n.length;m++){D=m+1;var E="";n[m]==b&&(E=0==g?" tobot":" totop"),hide_cls="",N.indexOf(n[m])>=0&&(hide_cls+=" hidden-sm"),T.indexOf(n[m])>=0&&(hide_cls+=" hidden-md"),i.indexOf(n[m])>=0&&(a+='<th class="column100 column'+D+E+hide_cls+'" data-column="column'+D+'" scope="col">'+n[m]+"</th>")}if(a+="</tr></tfoot><tbody></tbody></table>",t("#"+l+"-allContent").html(a),e.length>0){a="",D=0;for(var r=$<u?$:u,d=o.tolist,h=o.toimg,p=o.trufalse,f=o.action,m=v;m<$;m++){var x=e[m];a+='<tr class="row100"'+(x?.color!==void 0?' data-color="'+x.color+'"':"")+(x?.ID!==void 0?' data-id="'+x.ID+'"':"")+">";for(var _=0;_<n.length;_++){D=_+1;var w=x?.[n[_]];if(hide_cls="",N.indexOf(n[_])>=0&&(hide_cls+=" hidden-sm"),T.indexOf(n[_])>=0&&(hide_cls+=" hidden-md"),i.indexOf(n[_])>=0&&void 0!==w){if(a+='<td class="column100 column'+D+hide_cls+'" data-column="column'+D+'" data-label="'+n[_]+'">',f.indexOf(n[_])>=0){if(void 0===w){var C=w;a+='<a id="'+C.id+'" href="javascript:'+C.click+';" class="apollonbtn btn-'+C.color+'">'+C.content+"</a>"}else for(var y=0;y<w.length;y++){var C=w[y];C?.tooltip!==void 0?a+='<a id="'+C.id+"-"+C.toolid+'" data-url="sources/ajax/load/'+C.tooltip+'.php" data-id="'+C.toolid+'" data-val="0" href="'+C.click+'" target="_blank" class="apollonbtn btn-'+C.color+' tooltipster">'+C.content+"</a>":a+='<a id="'+C.id+'" href="javascript:'+C.click+';" class="apollonbtn btn-'+C.color+'">'+C.content+"</a>"}}else if(d.indexOf(n[_])>=0){a+='<ul class="'+l+'-list">';for(var y=0;y<w.length;y++){var C=w[y];a+="<li>"+C+"</li>"}a+="</ul>"}else if(h.indexOf(n[_])>=0){var k=w?.src!=="undefined"?' src="'+w.src+'"':"",O=w?.alt!=="undefined"?' alt="'+w.alt+'"':"",I=w?.id!=="undefined"?' id="'+w.id+'"':"",j=w?.class!=="undefined"?' class="'+w.class+" "+l+'-image"':' class="'+l+'-image"';a+="<img"+k+O+I+j+" />"}else p.indexOf(n[_])>=0?a+=!0===w?'<i class="apollon-ok-circled"></i>':'<i class="apollon-circle-empty"></i>':a+=w;a+="</td>"}}a+="</tr>"}t("#"+l+"-allContent table tbody").html(a),t("#"+l+"-txt3").html(lng.show_2+" "+v+" "+lng.tooo_1+" "+r+" "+lng.ooof_1+" "+u+" "+lng.line_2)}else a='<tr class="row100"><td class="column100 column1" data-column="column1" colspan="'+t("#"+l+"-allContent table thead tr th").length+'">'+lng.nodata+"</td></td>",t("#"+l+"-allContent table tbody").html(a),t("#"+l+"-txt3").html(lng.nodata),t("#"+l+" tbody").html(a),t("#"+l+"-allContent").removeClass("withsidebar"),t("#"+l+"-allContent").parent().find(".apollon-sidebar").remove()}t("#"+l+"-filters").addClass("hidden"),A(l);var L=t("#apollon-sidebar").height(),F=t("#"+l+"-allContent").height();L>F?t("#"+l+"-allContent").css({height:L+"px"}):t("#"+l+"-allContent").css({height:"auto"})},A=function(l){var a=1,e=1,n=p-4,i=o.pagination;p<6?(a=1,e=p):f<5?(a=1,e=5):f>=n?(a=p-4,e=p):(a=f-2,e=f+2);for(var s='<div class="pagination p'+[1,1,2,3,9,10,12][i]+'"><ul>',r=a;r<=e;r++)s+="<a"+(r==f?' class="is-active"':"")+' href="javascript:;" name="'+r+'">'+r+"</a>";s+="</ul></div>",1==p&&(s=""),t("#"+l+"-txt4").html(s),j(l)},M=function(l){var i=o.filters,s=i.length>0;if(s)for(var r=0;r<i.length;r++)d[i[r]]=[];t.post(o.ajaxurl,o.data,function(r){if(/^{.*}$/.test(r)&&"object"==typeof(r=JSON.parse(r))){r.data,a=r.data;for(var c=0;c<a.length;c++){var h=a[c];if(s)for(var b=0;b<n.length;b++)i.indexOf(n[b])>-1&&0>d[n[b]].indexOf(h[n[b]])&&d[n[b]].push(h[n[b]])}e=a;for(var g=t(this).find("thead tr th"),c=0;c<g.length;c++)n.push(t(g[c]).html());p=Math.ceil((u=a.length)/m),f=1,v=0,$=u>m?m:u,T(l),(0,o.callbackAjax)(a)}})},B=function(t){0==c&&W(t);var l=window.open("","","height=400,width=600");l.document.write("<html><head><title>Apollon</title>"),l.document.write('<style type = "text/css">'),l.document.write("body{font-family: Arial;font-size: 10pt;}table{border: 1px solid #ccc;border-collapse: collapse;}table th{background-color: #F7F7F7;color: #333;font-weight: bold;}table th, table td{padding: 5px;border: 1px solid #ccc;}"),l.document.write("</style>"),l.document.write("</head>"),l.document.write("<body>");var o=document.getElementById(t+"table").innerHTML;l.document.write('<table cellspacing="0" rules="all" border="1">'+o+"</table>"),l.document.write("</body>"),l.document.write("</html>"),l.document.close(),l.print()},Q=function(l){0==c&&W(l),jQuery().tableExport?t("#"+l+"table").tableExport({type:"csv",csvSeparator:";",displayTableName:!0,fileName:o.tableName}):G(lng.noexport)},V=function(l){0==c&&W(l),jQuery().tableExport?t("#"+l+"table").tableExport({type:"excel",displayTableName:!0,fileName:o.tableName,mso:{fileFormat:"xlsxhtml"}}):G(lng.noexport)},P=function(l){0==c&&W(l),jQuery().tableExport?t("#"+l+"table").tableExport({type:"excel",displayTableName:!0,fileName:o.tableName,mso:{fileFormat:"xmlss",worksheetName:["TomyTable","Table 2","Table 3"]}}):G(lng.noexport)},X=function(l){0==c&&W(l),jQuery().tableExport?t("#"+l+"table").tableExport({type:"pdf",displayTableName:!0,fileName:o.tableName,jspdf:{orientation:"l",format:"a4",margins:{left:10,right:10,top:20,bottom:20},autotable:{styles:{fillColor:"inherit",textColor:"inherit"},tableWidth:"auto"}}}):G(lng.noexport)},R=function(l){0==c&&W(l),jQuery().tableExport?t("#"+l+"table").tableExport({type:"sql",displayTableName:!0,fileName:o.tableName}):G(lng.noexport)},G=function(o){var a=t("#"+l+"-filters");a.removeClass("hidden");var e='<div class="alert alert-danger"><strong>'+lng.error+"</strong> "+o+"</div>";a.html(e)},H=function(l){if(1==h){var o=t("#"+l+"-filters");o.removeClass("hidden");for(var i='<div class="col-md-12 col-sm-12 text-center" id="'+l+'-insertContent"></div><div class="col-md-3 col-sm-12"><label>'+lng.column+'<br/><select class="custom-select custom-select-sm form-control form-control-sm" id="'+l+'-insertContent-1">',s=0;s<n.length;s++)nbr=s+1,n[s]==b&&(w=0==g?" tobot":" totop"),i+='<option value="'+n[s]+'">'+n[s]+"</option>";i+='</select></label></div><div class="col-md-3 col-sm-12"><label>'+lng.operation+'<br><select class="custom-select custom-select-sm form-control form-control-sm" id="'+l+'-insertContent-2"><option value="0">=</option><option value="1">&gt;</option><option value="2">&gt;=</option><option value="3">&lt;</option><option value="4">&lt;=</option><option value="5">!=</option></select></label></div><div class="col-md-3 col-sm-12"><label>'+lng.value+'<br><input type="text" id="'+l+'-insertContent-3" class="form-control form-control-sm" placeholder="'+lng.value+'"></label></div><div class="col-md-3 col-sm-12 text-right"><button type="button" class="btn btn-primary" id="insertContent-btn">'+lng.show+"</button></div><hr/>",o.html(i),jQuery().chosen&&t("#"+l+"-insertContent-1, #"+l+"-insertContent-2").chosen({width:"100%"}),t("#insertContent-btn").unbind("click").click(function(){o.addClass("hidden");var i=t("#"+l+"-insertContent-1").val(),s=parseInt(t("#"+l+"-insertContent-2").val()),r=parseFloat(t("#"+l+"-insertContent-3").val());e=[],u=a.length;for(var d=0,c=0;c<u;c++)for(var h=a[c],b=0;b<n.length;b++){var g=h[n[b]];n[b]==i&&(0==s&&g==r||1==s&&g>r||2==s&&g>=r||3==s&&g<r||4==s&&g<=r||5==s&&g!=r)&&(e.push(a[c]),d++)}p=Math.ceil((u=d)/m),f=1,($=(v=0)+parseInt(m))>u&&($=u),F(l)})}},U=function(l){var e=t("#"+l+"-filters"),i="",s="";e.removeClass("hidden");for(var r=0;r<n.length;r++)s+='<option value="'+n[r]+'">'+n[r]+"</option>";i+='<div class="col-md-12 col-sm-12 text-center" id="'+l+'-insertContent"></div><div class="col-md-2 col-sm-12"></div>',i+='<div class="col-md-5 col-sm-12"><label>'+lng.column+'<br/><select class="custom-select custom-select-sm form-control form-control-sm" multiple id="'+l+'-insertContent-1">'+s+"</select></label></div>",i+='<div class="col-md-2 col-sm-12"></div><div class="col-md-3 col-sm-12 text-right"><button type="button" class="btn btn-primary" id="insertContent-btn">'+lng.show+"</button></div><hr/>",e.html(i),jQuery().chosen&&t("#"+l+"-insertContent-1").chosen({width:"100%"}),t("#insertContent-btn").unbind("click").click(function(){e.addClass("hidden");var n=t("#"+l+"-insertContent-1").val();o.filters=n,d={};for(var i=0;i<n.length;i++)d[n[i]]=[];u=a.length;for(var s={},r=0;r<a.length;r++)for(var c=a[r],i=0;i<n.length;i++)0>d[n[i]].indexOf(c[n[i]])&&(d[n[i]].push(c[n[i]]),s[n[i]]=s[n[i]]+1);E(l)})},J=function(l){if(1==h){var o=t("#"+l+"-filters");o.removeClass("hidden");for(var a="",i="",s="",d=0;d<r.length;d++)a+='<option value="'+r[d]+'">'+r[d]+"</option>";for(var d=0;d<n.length;d++)i+='<option value="'+n[d]+'">'+n[d]+"</option>";a+='<option value="count">'+lng.count+"</option>",s+='<div class="col-md-12 col-sm-12 text-center" id="'+l+'-insertContentsta"></div>',s+='<div class="col-md-3 col-sm-12"><label>'+lng.abscis+'<br/><select class="custom-select custom-select-sm form-control form-control-sm" id="'+l+'-drawgraph-1">'+i+"</select></label></div>",s+='<div class="col-md-3 col-sm-12"><label>'+lng.coordo+'<br><select class="custom-select custom-select-sm form-control form-control-sm" id="'+l+'-drawgraph-2">'+a+"</select></label></div>",s+='<div class="col-md-3 col-sm-12"><label>'+lng.typ+'<br><select class="custom-select custom-select-sm form-control form-control-sm" id="'+l+'-drawgraph-3"><option value="0">'+lng.points+'</option><option value="1">'+lng.lines+'</option><option value="2">'+lng.lines_bg+'</option><option value="3">'+lng.lines_step+'</option><option value="4">'+lng.bars+"</option></select></label></div>",s+='<div class="col-md-3 col-sm-12 text-right"><button type="button" class="btn btn-primary" id="drawgraph-btn">'+lng.draw+"</button></div><hr/>",o.html(s),jQuery().chosen&&t("#"+l+"-drawgraph-1, #"+l+"-drawgraph-2, #"+l+"-drawgraph-3").chosen({width:"100%"}),t("#drawgraph-btn").unbind("click").click(function(){var o=t("#"+l+"-drawgraph-1").val(),a=t("#"+l+"-drawgraph-2").val(),i=t("#"+l+"-drawgraph-3").val();if(null!==a){t("#"+l+"-insertContentsta").html('<div class="drawgraph-flot-prnt"><div id="drawgraph-flot" class="drawgraph-flot"></div></div>');var s=[],r=[],d=[],c=0,h=0,p={},f=[];if("count"==a){for(var m=0;m<u;m++)for(var v=0;v<n.length;v++){var $=e[m];n[v]==o&&(f.indexOf($[n[v]])>-1?p[$[n[v]]]=p[$[n[v]]]+1:(f.push($[n[v]]),p[$[n[v]]]=1))}var b,m=0;for(var g in p)b=p[g],s.push([m,g]),d.push([m,b]),b>h&&(h=b+.2*b),m++;r.push({label:o,data:d})}else for(var m=0;m<u;m++)for(var $=e[m],v=0;v<n.length;v++){var x=parseFloat($[n[v]]);n[v]==o&&s.push([m,$[n[v]]]),a.indexOf(n[v])>=0&&(d?.[v]===void 0&&(d[v]=[]),d[v].push([m,x]),x>h&&(h=x+.2*x),0==c?c=x:x<c&&(c=x-.2*x))}for(var v=0;v<n.length;v++)a.indexOf(n[v])>=0&&r.push({label:n[v],data:d[v]});t.plot("#drawgraph-flot",r,{series:[{points:{show:!0}},{points:{show:!0},lines:{show:!0}},{points:{show:!0},lines:{show:!0,fill:!0}},{lines:{show:!0,steps:!0,fill:!0}},{bars:{show:!0}}][i],xaxis:{ticks:s},yaxis:{min:c,max:h}}),t("<div id='apollontooltip'></div>").css({position:"absolute",display:"none",border:"1px solid #fdd",padding:"2px","z-index":9999999999,"background-color":"#fee",opacity:.8}).appendTo("body"),t("#drawgraph-btn").bind("plothover",function(l,o,a){if(a){var e=a.datapoint[0].toFixed(2),n=a.datapoint[1].toFixed(2);t("#apollontooltip").html(a.series.label+" of "+e+" = "+n).css({top:a.pageY+5,left:a.pageX+5}).fadeIn(200)}else t("#apollontooltip").hide()})}})}},W=function(l){var o="";o=0==(c=1-c)?'<i class="apollon-table"></i> '+lng.tablemod:'<i class="apollon-list-bullet"></i> '+lng.listmod,t("#"+l+"-listable").html(o),"undefined"!=typeof Storage&&window.localStorage.setItem("apollontable_"+tc+"_s",c),F(l)},Y=function(l){if(1==h){var o,a,n=0,i={sum:{},avg:{},max:{},min:{},ext:{},nbr:{},q1:{},q2:{},q3:{},iqr:{}},s={},d={sum:lng.sum,avg:lng.avg,max:lng.max,min:lng.min,nbr:lng.nbr,ext:lng.ext,q1:lng.q1,q2:lng.q2,q3:lng.q3,iqr:lng.iqr},c=t("#"+l+"-filters");c.removeClass("hidden");for(var p='<div class="col-md-12 col-sm-12 text-center" id="tomytable-insertContent"><table class="result-table"><thead><tr><th scope="col">-</th>',f=0;f<r.length;f++)p+='<th scope="col">'+r[f]+"</th>",i.sum[r[f]]=0,i.avg[r[f]]=0,i.max[r[f]]=0,i.ext[r[f]]=0,i.min[r[f]]=null,s[r[f]]=[],i.q1[r[f]]=null,i.q2[r[f]]=null,i.q3[r[f]]=null,i.iqr[r[f]]=null;p+="</tr></thead><tbody>";for(var m=0;m<e.length;m++){n++;for(var f=0;f<r.length;f++)o=parseFloat(o=(o=e[m][r[f]]).replace(/ /g,"")),i.nbr[r[f]]=n,i.sum[r[f]]+=o,o>i.max[r[f]]&&(i.max[r[f]]=o),1==n?i.min[r[f]]=o:o<i.min[r[f]]&&(i.min[r[f]]=o),s[r[f]].push(o)}for(var u=Math.ceil(n/4)-1,v=Math.floor(3*n/4)-1,f=0;f<r.length;f++){var $=s[r[f]];if($=$.sort(function(t,l){return t-l}),i.ext[r[f]]=parseFloat(i.max[r[f]])-parseFloat(i.min[r[f]]),i.avg[r[f]]=parseFloat(i.sum[r[f]])/n,i.q1[r[f]]=parseFloat($[u]),i.q3[r[f]]=parseFloat($[v]),i.iqr[r[f]]=parseFloat($[v])-parseFloat($[u]),n%2==1){var b=(n+1)/2-1;i.q2[r[f]]=parseFloat($[b])}else{var g=n/2-1,x=g+1;i.q2[r[f]]=(parseFloat($[g])+parseFloat($[x]))/2}}for(z in i){a=i[z],p+="<tr><th>"+d[z]+"</th>";for(var f=0;f<r.length;f++)p+="<td>"+(isNaN(a[r[f]])?"/":Math.round(100*a[r[f]])/100)+"</td>";p+="</tr>"}p+="</tbody></table><hr/></div>",c.html(p)}},K=function(){return a},Z=function(){return e},tt=function(t){for(var l,o={},e=0;e<a.length;e++)(l=a[e])?.ID!==void 0&&l?.ID==t&&(o=l),l?.id!==void 0&&l?.id==t&&(o=l);return o},tl=function(t,l){for(var o,e=null,n=0;n<a.length;n++)(o=a[n])?.ID!==void 0&&o?.ID==t&&(e=o?.[l]),o?.id!==void 0&&o?.id==t&&(e=o?.[l]);return e},to=function(){"ajax"==o.datatype?M(l):(e=a,p=Math.ceil((u=a.length)/m),f=1,v=0,$=u>m?m:u,k(l),T(l))},ta=function(t,l){for(var o,e=!1,n=0;n<a.length;n++)((o=a[n])?.ID!==void 0&&o?.ID==t||o?.id!==void 0&&o?.id==t)&&(a[n]=l,e=!0);return e},te=function(t,l){return a.push(t),!0===l&&to(),!0},tn=function(t,l,o){for(var e,n=!1,i=0;i<a.length;i++)((e=a[i])?.ID!==void 0&&e?.ID==t||e?.id!==void 0&&e?.id==t)&&(a[i][l]=o,n=!0);return n},ti=function(t){for(var l,o=[],e=!1,n=0;n<a.length;n++)((l=a[n])?.ID!==void 0&&l?.ID!=t||l?.id!==void 0&&l?.id!=t)&&(o.push(a[n]),e=!0);return a=o,e},ts=function(t,l){for(var o,e=!1,n=0;n<a.length;n++)((o=a[n])?.ID!==void 0&&o?.ID==t||o?.id!==void 0&&o?.id==t)&&(tf.indexOf(l)?a[n][l]=0:a[n][l]="",e=!0);return e},tr=o.lang;lng="en"==tr?o.english:lng[tr],("ar"==tr||"iw"==tr)&&t("head").append('<link rel="stylesheet" href="'+o.distloc+'css/rtl-apollon.min.css" type="text/css" />');var td=o.columns,tc=o.tableID;if(td.length>0)n=td,i=td,s=td;else{for(var th=t(this).find("thead tr th"),tp=0;tp<th.length;tp++)n.push(t(th[tp]).html());o.columns=n,i=n,s=n}for(var tf=o.sortnbr,tm=o.specialsort,tp=0;tp<n.length;tp++)(tf.indexOf(n[tp])>=0||tm.indexOf(n[tp])>=0)&&r.push(n[tp]);if(r.length>0&&(h=1),c="list"==o.showmode||"html"==o.showmode?0:1,t(this).attr("data-vertable",o.theme),t(this).parent().addClass(o.theme),"html"==o.datatype){var tu=o.filters,_=tu.length>0,tv=t(this).find("tbody tr");if(_)for(var tp=0;tp<tu.length;tp++)d[tu[tp]]=[];for(var tp=0;tp<tv.length;tp++){for(var t$=t(tv[tp]).find("td"),tb={},tg=0;tg<t$.length;tg++)tb[n[tg]]=t(t$[tg]).html(),tb[n[tg]]=tb[n[tg]].replace(/(\r\n|\n|\r| )/gm,"");e.push(tb),a.push(tb),u++}u<m?(p=1,$=u):(p=Math.ceil(u/m),$=m);for(var tp=0;tp<a.length;tp++){var tx=a[tp];if(_)for(var t_=0;t_<n.length;t_++)tu.indexOf(n[t_])>-1&&0>d[n[t_]].indexOf(tx[n[t_]])&&d[n[t_]].push(tx[n[t_]])}T(l),(callback=o.callback)(a)}else if("js"==o.datatype){var tu=o.filters,_=tu.length>0;if(_)for(var tp=0;tp<tu.length;tp++)d[tu[tp]]=[];a=o.data,e=o.data,(u=a.length)<m?(p=1,$=u):(p=Math.ceil(u/m),$=m);for(var tp=0;tp<a.length;tp++){var tx=a[tp];if(_)for(var t_=0;t_<n.length;t_++)tu.indexOf(n[t_])>-1&&0>d[n[t_]].indexOf(tx[n[t_]])&&d[n[t_]].push(tx[n[t_]])}T(l),(callback=o.callback)(a)}else"ajax"==o.datatype?M(l):(a=[],e=[],n=[],p=0,f=1,m=10,u=0,v=0,$=0,b=0,g=0,x="",T(l),(callback=o.callback)(a));if("undefined"!=typeof Storage){c=window.localStorage.getItem("apollontable_"+tc+"_s"),g=window.localStorage.getItem("apollontable_"+tc+"_o"),b=window.localStorage.getItem("apollontable_"+tc+"_c"),m=window.localStorage.getItem("apollontable_"+tc+"_n");var tw=o.toshow;m||(m=tw[0]),x=window.localStorage.getItem("apollontable_"+tc+"_r"),(f=window.localStorage.getItem("apollontable_"+tc+"_p"))||(f=1)}this.getTable=function(){return K()},this.getFiltredTable=function(){return Z()},this.getLine=function(t){return tt(t)},this.getColumn=function(t,l){return tl(t,l)},this.refresh=function(){to()},this.editLine=function(t,l){return ta(t,l)},this.addLine=function(t,l){return te(t,l)},this.editColumn=function(t,l,o){return tn(t,l,o)},this.removeLine=function(t){return ti(t)},this.removeColumn=function(t,l){return ts(t,l)},this.setFilter=function(t,l){I(t,l)},this.xsort=function(t,o){y(l,t,o)}})}}(jQuery):console.error(">> jQuery.js is required to use ApollonJS !! <<");