/*
 *  https://tomyvinci.github.io/apollon/
 *
 *  Document   : apollon.js
 *  Author     : Tomy Vinci 
 *  Description: The javascript file of Apollon
 *  Version    : v1.0.0 / Free
 *
*/
"undefined"!=typeof jQuery?function(t){t.fn.apollon=function(l){var o=t.extend({tableID:1,tableName:"Apollon",distloc:"",datatype:"html",showmode:"table",showcode:"",theme:1,ajaxload:!1,data_url:"",data:{},hide_md:[],hide_sm:[],functions:[],specialsort:[],tolist:[],filters:[],filterMaxNum:20,toimg:[],sortnbr:[],trufalse:[],action:[],columns:[],toshow:[10,25,50,100,200,500],tosort:[],loading:0,loadtxt:"Apollon",pagination:1,callback:function(){},callbackAjax:function(){},exportCSV:!1,exportXML:!1,exportPDF:!1,exportSQL:!1,english:{nodata:"No data to show !",loading:"Loading...",show_1:"Show",line_1:"entries",search:"Search",show_2:"Showing",tooo_1:"to",ooof_1:"of",line_2:"entries",noexport:"To export, you have to include exportation plugins",refresh:"Refresh",export:"Export",listmod:"Normal View",tablemod:"Table View",toshow:"To show",functions:"Functions",stats:"Statistics",graph:"Graph",selection:"Select",filtring:"Filtering",print:"Print",column:"Column",operation:"operation",value:"Value",show:"Show",abscis:"Abscissa",coordo:"Coordinates",error:"Error",typ:"Type",sum:"Sum",avg:"Average",max:"Max",min:"Min",nbr:"Number",ext:"Extent",q1:"Q1",q2:"Median",q3:"Q3",iqr:"IQR",draw:"Graph",count:"Number of times",points:"Points",lines:"Lines",lines_bg:"Lines - background",lines_step:"Lines - steps",bars:"Bars",circle:"Circle",nofilter:"Delete",true:"Yes",false:"Non"},lang:"en"},l);return this.each(function(){var l=t(this).attr("id"),a=[],e=[],i=[],n=[],s=[],r=[],d={},c="list"==o.showmode||"html"==o.showmode?0:1,h=0,f=0,p=1,m=10,u=0,v=0,$=0,b=0,g=0,_="",x=!1,w="",y={1:{file:"audio",width:40,color:"1ABC9C"},2:{file:"rings",width:60,color:"34495E"},3:{file:"grid",width:40,color:"F39C12"},4:{file:"hearts",width:80,color:"9B59B6"},5:{file:"oval",width:50,color:"3498DB"},6:{file:"three-dots",width:60,color:"E74C3C"},7:{file:"spinning-circles",width:50,color:"2ECC71"},8:{file:"puff",width:50,color:"2C3E50"},9:{file:"circles",width:50,color:"F1C40F"},10:{file:"tail-spin",width:50,color:"8E44AD"},11:{file:"bars",width:40,color:"2980B9"},12:{file:"ball-triangle",width:50,color:"E74C3C"}},C=function(t,l){var a,e,i=o.sortnbr,n=o.specialsort,s=t.replace("sort_","");return function(o,r){return(a=o[t],e=r[t],(i.indexOf(s)>=0||n.indexOf(s)>=0)&&(a=parseFloat(a=(a=a?.toString()||a)?.replace(" ","")||a),e=parseFloat(e=(e=e?.toString()||e)?.replace(" ","")||e)),1==l||"asc"==l)?a>e?1:a<e?-1:0:a<e?1:a>e?-1:0}},k=function(t,l,a){"asc"==a.toLowerCase()&&(a=1),"desc"==a.toLowerCase()&&(a=0),o.specialsort.indexOf(l)>=0&&(l="sort_"+l),"undefined"!=typeof Storage&&(window.localStorage.setItem("apollontable_"+tc+"_o",a),window.localStorage.setItem("apollontable_"+tc+"_c",l)),e.sort(C(l,a)),F(t)},O=function(t){return t=(t=t.toLowerCase()).replace(/[^0-9a-z]/gi,"")},I=function(o,i){var n={},s="",r="",d=t("select.itm-sect-sel").length;if(t("#"+l+"-allContent").css({height:"auto"}),0==d){t('.apollon-sidebar a[data-filter="'+o+'"][data-value="'+i+'"]').parent().parent().find("a").removeClass("selected"),t('.apollon-sidebar a[data-filter="'+o+'"][data-value="'+i+'"]').addClass("selected"),t('.apollon-sidebar a[data-filter="'+o+'"][data-value="'+i+'"]').parent().parent().find("a span").removeClass("apollon-circle").removeClass("apollon-circle-empty").addClass("apollon-circle-empty"),t('.apollon-sidebar a[data-filter="'+o+'"][data-value="'+i+'"] span').addClass("apollon-circle").removeClass("apollon-circle-empty");for(var c,h=t("#"+l+"apollon-sidebar ul"),b=0;b<h.length;b++)s=t(c=h[b]).find("li a.selected").attr("data-filter"),r=t(c).find("li a.selected").attr("data-value"),void 0!==s&&void 0!==r&&s.length>0&&r.length>0&&(n[s]=r);if(Object.keys(n).length>0){var g=[],_={},x=1,w="";for(var b in a){for(var y in _=a[b],x=1,n)"true"==n[y]||"false"==n[y]?("true"==n[y]&&!0!=_[y]||"false"==n[y]&&!1!=_[y])&&(x=0):(w="string"==typeof(w=_[y])?w.replace(/<\/?[^>]+(>|$)/g,""):"","no_filter"!=n[y]&&(void 0===w||w!=n[y])&&(x=0));1==x&&g.push(a[b])}f=Math.ceil((u=(e=g).length)/m),p=1,v=0,$=u>m?m:u,F(l)}else e=a,f=Math.ceil((u=a.length)/m),p=1,v=0,$=u>m?m:u,F(l)}else{for(var c,h=t("select.itm-sect-sel"),b=0;b<h.length;b++)s=t(c=h[b]).attr("name"),r=t(c).find(":selected").val(),void 0!==s&&void 0!==r&&s.length>0&&r.length>0&&(n[s]=r);if(Object.keys(n).length>0){var g=[],_={},x=1,w="";for(var b in a){for(var y in _=a[b],x=1,n)"true"==n[y]||"false"==n[y]?("true"==n[y]&&!0!=_[y]||"false"==n[y]&&!1!=_[y])&&(x=0):(w="string"==typeof(w=_[y])?w.replace(/<\/?[^>]+(>|$)/g,""):w,"no_filter"!=n[y]&&(void 0===w||w!=n[y])&&(x=0));1==x&&g.push(a[b])}f=Math.ceil((u=(e=g).length)/m),p=1,v=0,$=u>m?m:u,F(l)}else e=a,f=Math.ceil((u=a.length)/m),p=1,v=0,$=u>m?m:u,F(l)}var C=t("#"+l+"apollon-sidebar").height(),k=t("#"+l+"-allContent").height();C>=k?t("#"+l+"-allContent").css({height:C+"px"}):t("#"+l+"-allContent").css({height:"auto"})},j=function(l){t(".column100").unbind("mouseover").on("mouseover",function(){var l=t(this).parent().parent().parent(),o=t(this).parent().parent(),a=t(l).data("vertable")+"",e=t(this).data("column")+"";t(o).find("."+e).addClass("hov-column-"+a),t(l).find(".row100.head ."+e).addClass("hov-column-head-"+a),t(l).find(".row100.foot ."+e).addClass("hov-column-head-"+a)}),t(".column100").unbind("mouseout").on("mouseout",function(){var l=t(this).parent().parent().parent(),o=t(this).parent().parent(),a=t(l).data("vertable")+"",e=t(this).data("column")+"";t(o).find("."+e).removeClass("hov-column-"+a),t(l).find(".row100.head ."+e).removeClass("hov-column-head-"+a),t(l).find(".row100.foot ."+e).removeClass("hov-column-head-"+a)}),t("#"+l+'dropone [type="checkbox"]').unbind("change").change(function(){n=[];for(var o=t("#"+l+"dropone").find('[type="checkbox"]'),a=0;a<o.length;a++){var e=t(o[a]).attr("name");!0==t(o[a]).prop("checked")&&n.push(e)}"undefined"!=typeof Storage&&window.localStorage.setItem("apollontable_"+tc+"_1",JSON.stringify(n)),F(l)}),t("#"+l+'droptwo [type="checkbox"]').unbind("change").change(function(){s=[];for(var o=t("#"+l+"droptwo").find('[type="checkbox"]'),a=0;a<o.length;a++){var e=t(o[a]).attr("name");!0==t(o[a]).prop("checked")&&s.push(e)}"undefined"!=typeof Storage&&window.localStorage.setItem("apollontable_"+tc+"_2",JSON.stringify(s))}),t("#"+l+"-txt1").unbind("change").change(function(){m=parseInt(t(this).val()),f=Math.ceil(u/m),p=1,v=0,$=m<u?m:u,"undefined"!=typeof Storage&&window.localStorage.setItem("apollontable_"+tc+"_n",m),F(l)}),t("#"+l+"table .head th, #"+l+"table .foot th").unbind("click").click(function(){var a;b=t(this).html(),g=1-g,o.specialsort.indexOf(b)>=0&&(b="sort_"+b),"undefined"!=typeof Storage&&(window.localStorage.setItem("apollontable_"+tc+"_o",g),window.localStorage.setItem("apollontable_"+tc+"_c",b)),e.sort(C(b,g)),F(l)}),t("#"+l+"-txt2 input").unbind("keyup").keyup(function(n){_=t(this).val(),that=this;let r=_.charAt(_.length-1);"-"==r&&(_=_.substring(0,_.length-1)),e=[],u=a.length;for(var d=0,c=0;c<u;c++){for(var h=a[c],b="",g=0;g<i.length;g++){var x=h[i[g]];s.indexOf(i[g])>=0&&(b=b+x+"-")}var w="--"==r?RegExp(_+"-","gi"):RegExp(_,"gi");result=b.match(w),(result=(b.match(w)||[]).length)>0&&(e.push(a[c]),d++)}if(0==_.length?(e=a,u=a.length,p=1,f=Math.ceil(u/m),v=0,$=u>m?m:u):(f=Math.ceil((u=d)/m),p=1,v=0,$=u>m?m:u),n.keyCode||n.which,"undefined"!=typeof Storage){var y=o.tableID;window.localStorage.setItem("apollontable_"+y+"_r",_)}F(l);var C=t("#"+l+"-txt2 input"),k=2*C.val().length;C.focus(),C[0].setSelectionRange(k,k)}),t("#"+l+"-refresh").unbind("click").click(function(){"ajax"==o.datatype?B(l):(e=a,f=Math.ceil((u=a.length)/m),p=1,v=0,$=u>m?m:u,E(l))}),t("#"+l+"-print").unbind("click").click(function(){M(l)}),t("#"+l+"-what2show").unbind("click").click(function(){H(l)}),t("#"+l+"-selfilterz").unbind("click").click(function(){U(l)}),t("#"+l+"-drawgraph").unbind("click").click(function(){Y(l)}),t("#"+l+"-listable").unbind("click").click(function(){J(l)}),t("#"+l+"-func-a").unbind("click").click(function(){funcCalc(l)}),t("#"+l+"-func-v").unbind("click").click(function(){W(l)}),t("#"+l+"-func-c").unbind("click").click(function(){funcVarEca(l)}),t("#"+l+"-func-d").unbind("click").click(function(){funcDevia(l)}),t("#"+l+"-func-e").unbind("click").click(function(){funcAbsDev(l)}),t("#"+l+"-export-csv").unbind("click").click(function(){Q(l)}),t("#"+l+"-export-msexcel").unbind("click").click(function(){V(l)}),t("#"+l+"-export-xml").unbind("click").click(function(){P(l)}),t("#"+l+"-export-pdf").unbind("click").click(function(){X(l)}),t("#"+l+"-export-sql").unbind("click").click(function(){R(l)}),jQuery().tooltipster&&t(".tooltipster").tooltipster({theme:"tooltipster-shadow",animation:"fade",delay:200,interactive:!0,repositionOnScroll:!0,contentAsHTML:!0,content:lng.loading,functionBefore:function(l,o){var a=t(o.origin),e=a.attr("data-id"),i=a.attr("data-val"),n=a.attr("data-url");!0!==a.data("loaded")&&t.post(n,{id:e,val:i},function(t){l.content(t),a.data("loaded",!0)})}}),t("#"+l+"dropone-btn").unbind("click").click(function(){S(l),q(l)}),t("#"+l+"droptwo-btn").unbind("click").click(function(){S(l),D(l)}),t("#"+l+"dropthree-btn").unbind("click").click(function(){S(l),N(l)}),t("#"+l+"-fullscr").unbind("click").click(function(){0==parseInt(t(this).attr("name"))?(t("body").removeClass("apollontablefull").addClass("apollontablefull"),t("#"+l+"table").parent().parent().parent().parent().removeClass("apollontable-fullfixed").addClass("apollontable-fullfixed"),t(this).attr("name",1),t(this).html('<i class="apollon-resize-small"></i>')):(t("body").removeClass("apollontablefull"),t("#"+l+"table").parent().parent().parent().parent().removeClass("apollontable-fullfixed"),t(this).attr("name",0),t(this).html('<i class="apollon-resize-full"></i>'))}),t('[data-typ="filter"]').unbind("click").click(function(){var l=t(this).attr("data-filter"),o=t(this).attr("data-value");I(l,o)}),t("select.itm-sect-sel").unbind("change").change(function(){var l=t(this).attr("name"),o=t(this).val();I(l,o)}),t("#"+l+"-txt4 .pagination a").unbind("click").click(function(){p=parseInt(t(this).attr("name")),($=(v=parseInt((p-1)*m))+parseInt(m))>u&&($=u),t("#"+l+"-txt4 .pagination a").removeClass("is-active"),t("#"+l+'-txt4 .pagination a[name="'+p+'"]').addClass("is-active"),"undefined"!=typeof Storage&&window.localStorage.setItem("apollontable_"+tc+"_p",p),F(l)}),window.onclick=function(t){var o=document.getElementsByClassName("dropbtn")[0].contains(t.target),a=document.getElementsByClassName("dropbtn")[1].contains(t.target),e=document.getElementsByClassName("dropbtn")[2].contains(t.target);o||a||e||S(l)};var r=t("#"+l+"apollon-sidebar").height(),d=t("#"+l+"-allContent").height();r>=d?t("#"+l+"-allContent").css({height:r+"px"}):t("#"+l+"-allContent").css({height:"auto"})},S=function(l){t(".dropdown-content").removeClass("show")},q=function(l){t("#"+l+"dropone").removeClass("show").addClass("show")},D=function(l){t("#"+l+"droptwo").removeClass("show").addClass("show")},N=function(l){t("#"+l+"dropthree").removeClass("show").addClass("show")},E=function(t){b=(sortcolz=o.tosort)[0],g=sortcolz[1];var l=o.specialsort;"asc"==g.toLowerCase()&&(g=1),"desc"==g.toLowerCase()&&(g=0),l.indexOf(b)>=0&&(b="sort_"+b),"undefined"!=typeof Storage&&(window.localStorage.setItem("apollontable_"+tc+"_o",g),window.localStorage.setItem("apollontable_"+tc+"_c",b)),e.sort(C(b,g)),L(t)},L=function(l){t("#"+l).parent().html('<div id="'+l+'-block" class="apollon-block tomythem-1"></div>');for(var a='<div class="row apollon-details"><div class="col-md-6 col-sm-12"><label><div class="dropdown" id="dropdown-1"><button id="'+l+'dropone-btn" class="dropbtn"><i class="apollon-eye"></i></button><div id="'+l+'dropone" class="dropdown-content">',r=0;r<i.length;r++)L=r+1,i[r]==b&&(B=0==g?" tobot":" totop"),a+='<a href="javascript:;"><div class="checkbox checkbox-primary"><label><input class="styled" type="checkbox"'+(n.indexOf(i[r])>-1?' checked="checked"':"")+' name="'+i[r]+'"><span>'+i[r]+"</span></label></div></a>";a+="</div></div>",a+='<select class="custom-select custom-select-sm form-control form-control-sm" id="'+l+'-txt1">';for(var d=o.toshow,r=0;r<d.length;r++)a+='<option value="'+d[r]+'"'+(d[r]==m?" selected":"")+">"+d[r]+"</option>";a+="</select></label></div>",a+='<div class="col-md-6 col-sm-12 text-right"><div id="'+l+'-txt2"><label><input type="search" class="form-control form-control-sm" placeholder="'+lng.search+'" value="'+(null!=_?_:"")+'"><div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups"><div class="btn-group me-2" role="group" aria-label="Second group"><div class="dropdown left-drop" id="dropdown-2"><button id="'+l+'droptwo-btn" class="dropbtn"><i class="apollon-search"></i></button><div id="'+l+'droptwo" class="dropdown-content">';for(var r=0;r<i.length;r++)L=r+1,i[r]==b&&(B=0==g?" tobot":" totop"),a+='<a href="javascript:;"><div class="checkbox checkbox-primary"><label><input class="styled" type="checkbox"'+(s.indexOf(i[r])>-1?' checked="checked"':"")+' name="'+i[r]+'"><span>'+i[r]+"</span></label></div></a>";a+='</div></div><div class="dropdown left-drop" id="dropdown-3"><button id="'+l+'dropthree-btn" class="dropbtn"><i class="apollon-ellipsis"></i></button><div id="'+l+'dropthree" class="dropdown-content"></div></div><button type="button" class="btn btn-primary" id="'+l+'-fullscr" name="0"><i class="apollon-resize-full"></i></button></div></div></label></div></div></div>',a+='<div class="row apollon-filters hidden" id="'+l+'-filters"></div></div><div class="apollon-content table100 tomythem-'+o.theme+'">';var c=o.filters.length>0;if(a+='<div class="apollon-sidebar'+(c?"":" hidden")+'" id="'+l+'apollon-sidebar"></div>',a+='<div class="table-responsive'+(c?" withsidebar":"")+'" id="'+l+'-allContent">',a+="</div></div>",a+='<div class="row apollon-details"><div class="col-md-6 col-sm-12 '+l+'-txt3" id="'+l+'-txt3"></div><div class="col-md-6 col-sm-12 text-right"><div class="dataTables_paginate paging_simple_numbers" id="'+l+'-txt4"></div></div></div></div>',t("#"+l+"-block").html(a),a="","list"==o.showmode){if(e.length>0){a="",L=0;for(var h=$<u?$:u,f=o.tolist,p=o.toimg,x=o.trufalse,w=o.action,r=v;r<h;r++){var y=e[r];a+='<dl class="tomylist dl-horizontal"'+(void 0!==y.color?' data-color="'+y.color+'"':"")+(void 0!==y.ID?' data-id="'+y.ID+'"':"")+">";for(var C=0;C<i.length;C++){L=C+1;var k=y?.[i[C]];if(hide_cls="",n.indexOf(i[C])>=0&&void 0!==k){if(a+='<dt class="column100 column'+L+hide_cls+'" data-column="column'+L+'" data-label="'+i[C]+'">'+i[C]+'</dt><dd class="column100 column'+L+hide_cls+'" data-column="column'+L+'" data-label="'+i[C]+'">',w.indexOf(i[C])>=0){if(void 0===k){var O=k;a+='<a id="'+O.id+'" href="javascript:'+O.click+';" class="apollonbtn btn-'+O.color+'">'+O.content+"</a>"}else for(var I=0;I<k.length;I++){var O=k[I];O?.tooltip!==void 0?a+='<a id="'+O.id+"-"+O.toolid+'" data-url="sources/ajax/load/'+O.tooltip+'.php" data-id="'+O.toolid+'" data-val="0" href="'+O.click+'" target="_blank" class="apollonbtn btn-'+O.color+' tooltipster">'+O.content+"</a>":a+='<a id="'+O.id+'" href="javascript:'+O.click+';" class="apollonbtn btn-'+O.color+'">'+O.content+"</a>"}}else if(f.indexOf(i[C])>=0){a+='<ul class="'+l+'-list">';for(var I=0;I<k.length;I++){var O=k[I];a+="<li>"+O+"</li>"}a+="</ul>"}else if(p.indexOf(i[C])>=0){var j=void 0!==k.src?' src="'+k.src+'"':"",S=void 0!==k.alt?' alt="'+k.alt+'"':"",q=void 0!==k.id?' id="'+k.id+'"':"",D=void 0!==k.class?' class="'+k.class+" "+l+'-image"':' class="'+l+'-image"';a+="<img"+j+S+q+D+" />"}else x.indexOf(i[C])>=0?a+=!0===k?'<i class="apollon-ok-circled"></i>':'<i class="apollon-circle-empty"></i>':a+=k;a+="</dd>"}}a+='</dl><hr class="small-hr"/>'}t("#"+l+"-allContent").html(a),t("#"+l+"-txt3").html(lng.show_2+" "+v+" "+lng.tooo_1+" "+h+" "+lng.ooof_1+" "+u+" "+lng.line_2)}else a='<hr class="small-hr" /><dl class="tomylist dl-horizontal" wfd-id="10"><dt>!!!</dt><dd>'+lng.nodata+'</dd></dl><hr class="small-hr" />',t("#"+l+"-txt3").html(lng.nodata),t("#"+l+"-allContent").html(a)}else if("html"==o.showmode){t("#"+l+"-allContent").html('<div id="'+l+'x" class="row nomarg"></div>'),t("#"+l+"x").addClass("row nomarg");var N=o.showcode;a="",L=0;for(var h=$<u?$:u,f=o.tolist,p=o.toimg,x=o.trufalse,w=o.action,r=v;r<h;r++){for(var y=e[r],E=N,C=0;C<i.length;C++){L=C+1;var k=y[i[C]];E=E.replaceAll("["+i[C].toUpperCase()+"]",k)}a+=E}t("#"+l+"x").html(a),e.length>0||(a='<hr class="small-hr" /><dl class="tomylist dl-horizontal" wfd-id="10"><dt>!!!</dt><dd>'+lng.nodata+'</dd></dl><hr class="small-hr" />',t("#"+l+"-txt3").html(lng.nodata),t("#"+l+"-allContent").html(a))}else{a+='<table id="'+l+'table" class="table table-apollon table-striped table-sm" data-vertable="tomythem-'+o.theme+'"><thead><tr class="row100 head">';for(var L=0,F=o.hide_sm,A=o.hide_md,r=0;r<i.length;r++){L=r+1;var B="";i[r]==b&&(B=0==g?" tobot":" totop"),hide_cls="",F.indexOf(i[r])>=0&&(hide_cls+=" hidden-sm"),A.indexOf(i[r])>=0&&(hide_cls+=" hidden-md"),n.indexOf(i[r])>=0&&(a+='<th class="column100 column'+L+B+hide_cls+'" data-column="column'+L+'" scope="col">'+i[r]+"</th>")}a+='</tr></thead><tfoot><tr class="row100 foot">';for(var L=0,F=o.hide_sm,A=o.hide_md,r=0;r<i.length;r++){L=r+1;var B="";i[r]==b&&(B=0==g?" tobot":" totop"),hide_cls="",F.indexOf(i[r])>=0&&(hide_cls+=" hidden-sm"),A.indexOf(i[r])>=0&&(hide_cls+=" hidden-md"),n.indexOf(i[r])>=0&&(a+='<th class="column100 column'+L+B+hide_cls+'" data-column="column'+L+'" scope="col">'+i[r]+"</th>")}if(a+="</tr></tfoot><tbody></tbody></table>",t("#"+l+"-allContent").html(a),e.length>0){a="",L=0;for(var h=$<u?$:u,f=o.tolist,p=o.toimg,x=o.trufalse,w=o.action,r=v;r<h;r++){var y=e[r];a+='<tr class="row100"'+(y?.color!==void 0?' data-color="'+y.color+'"':"")+(y?.ID!==void 0?' data-id="'+y.ID+'"':"")+">";for(var C=0;C<i.length;C++){L=C+1;var k=y?.[i[C]];if(hide_cls="",F.indexOf(i[C])>=0&&(hide_cls+=" hidden-sm"),A.indexOf(i[C])>=0&&(hide_cls+=" hidden-md"),n.indexOf(i[C])>=0&&void 0!==k){if(a+='<td class="column100 column'+L+hide_cls+'" data-column="column'+L+'" data-label="'+i[C]+'">',w.indexOf(i[C])>=0){if(void 0===k){var O=k;a+='<a id="'+O.id+'" href="javascript:'+O.click+';" class="apollonbtn btn-'+O.color+'">'+O.content+"</a>"}else for(var I=0;I<k.length;I++){var O=k[I];O?.tooltip!==void 0?a+='<a id="'+O.id+"-"+O.toolid+'" data-url="sources/ajax/load/'+O.tooltip+'.php" data-id="'+O.toolid+'" data-val="0" href="'+O.click+'" target="_blank" class="apollonbtn btn-'+O.color+' tooltipster">'+O.content+"</a>":a+='<a id="'+O.id+'" href="javascript:'+O.click+';" class="apollonbtn btn-'+O.color+'">'+O.content+"</a>"}}else if(f.indexOf(i[C])>=0){a+='<ul class="'+l+'-list">';for(var I=0;I<k.length;I++){var O=k[I];a+="<li>"+O+"</li>"}a+="</ul>"}else if(p.indexOf(i[C])>=0){var j=k?.src!=="undefined"?' src="'+k.src+'"':"",S=k?.alt!=="undefined"?' alt="'+k.alt+'"':"",q=k?.id!=="undefined"?' id="'+k.id+'"':"",D=k?.class!=="undefined"?' class="'+k.class+" "+l+'-image"':' class="'+l+'-image"';a+="<img"+j+S+q+D+" />"}else x.indexOf(i[C])>=0?a+=!0===k?'<i class="apollon-ok-circled"></i>':'<i class="apollon-circle-empty"></i>':a+=k;a+="</td>"}}a+="</tr>"}t("#"+l+"-allContent table tbody").html(a),t("#"+l+"-txt3").html(lng.show_2+" "+v+" "+lng.tooo_1+" "+h+" "+lng.ooof_1+" "+u+" "+lng.line_2)}else a='<tr class="row100"><td class="column100 column1" data-column="column1" colspan="'+t("#"+l+"-allContent table thead tr th").length+'">'+lng.nodata+"</td></td>",t("#"+l+"-allContent table tbody").html(a),t("#"+l+"-txt3").html(lng.nodata),t("#"+l+" tbody").html(a)}T(l)},T=function(l){var a="";a+='<a href="javascript:;" id="'+l+'-refresh"><i class="apollon-arrows-cw"></i>'+lng.refresh+"</a>",jQuery().tableExport&&(a+='<div class="like-a"><i class="apollon-download-cloud"></i> '+lng.export+'<i class="apollon-angle-right"></i><div class="second-stage">',o.exportCSV&&(a+='<a href="javascript:;" id="'+l+'-export-csv">CSV</a>'),a+='<a href="javascript:;" id="'+l+'-export-msexcel">Excel</a>',o.exportXML&&(a+='<a href="javascript:;" id="'+l+'-export-xml">XML</a>'),o.exportPDF&&(a+='<a href="javascript:;" id="'+l+'-export-pdf">PDF</a>'),o.exportSQL&&(a+='<a href="javascript:;" id="'+l+'-export-sql">SQL</a>'),a+="</div></div>"),"list"==o.showmode||"html"==o.showmode?a+='<a href="javascript:;" id="'+l+'-listable"><i class="apollon-table"></i> '+lng.tablemod+"</a>":a+='<a href="javascript:;" id="'+l+'-listable"><i class="apollon-list-bullet"></i> '+lng.listmod+"</a>",a+='<a href="javascript:;" id="'+l+'-what2show"><i class="apollon-sliders"></i> '+lng.selection+"</a>",a+='<a href="javascript:;" id="'+l+'-selfilterz"><i class="apollon-filter"></i> '+lng.filtring+"</a>",o.functions.length>0&&(a+='<div class="like-a"><i class="apollon-calc"></i> '+lng.functions+'<i class="apollon-angle-right"></i><div class="second-stage">',a+='<a href="javascript:;" id="'+l+'-func-v">'+lng.stats+"</a>",a+="</div></div>"),jQuery().plot&&(a+='<a href="javascript:;" id="'+l+'-drawgraph"><i class="apollon-chart-bar"></i> '+lng.graph+"</a>"),a+='<a href="javascript:;" id="'+l+'-print"><i class="apollon-print"></i> '+lng.print+"</a>",t("#"+l+"dropthree").html(a);var e=o.filters,i=o.filterMaxNum;if(e.length>0){for(tf in a="",nbractx=0,selectaz=0,d){var n=d[tf];n.length>i&&(selectaz=1)}if(0==selectaz){for(tf in d){a+="<ul><li><h5>"+tf+'</h5></li><li class="itm-sect itm-sect-no_filter"><a class="mail-no_filter" href="javascript:;" data-typ="filter" data-filter="" data-value=""><span class="apollon-circle"></span>'+lng.nofilter+' <em class="text-muted filter-number"></em></a></li>';for(var s,n=d[tf],r=0;r<n.length;r++)!0===(s=n[r])&&(s=lng.true),!1===s&&(s=lng.false),s.length>0&&nbractx++,s=s.replace(/<\/?[^>]+(>|$)/g,""),nbractx<=i&&s.length>0&&(a+='<li class="itm-sect itm-sect-'+O(tf)+"_"+O(s)+'"><a class="mail-'+O(tf)+"_"+O(s)+'" href="javascript:;" data-typ="filter" data-filter="'+tf+'" data-value="'+(s==lng.true?"true":s==lng.false?"false":s)+'"><span class="apollon-circle-empty"></span>'+s+' <em class="text-muted filter-number"></em></a></li>');a+="</ul>"}t("#"+l+"apollon-sidebar").html(a)}else{var c=[];for(tf in d){a+="<ul><li><h5>"+tf+'</h5></li><li><select class="itm-sect-sel itm-sect-'+O(tf)+'" id="filter-select-'+O(tf)+'" name="'+tf+'"><option value="no_filter">'+lng.nofilter+"</option>";var s,n=d[tf];c.push("#filter-select-"+O(tf));for(var r=0;r<n.length;r++)!0===(s=n[r])&&(s=lng.true),!1===s&&(s=lng.false),nbractx++,(s=s.replace(/<\/?[^>]+(>|$)/g,"")).length>0&&(a+='<option value="'+(s==lng.true?"true":s==lng.false?"false":s)+'">'+s+"</option>");a+="</select></li></ul>"}t("#"+l+"apollon-sidebar").html(a),jQuery().chosen&&c.length>0&&t(c.join(",")).chosen({width:"100%"})}var h=t("#"+l+"apollon-sidebar").height(),f=t("#"+l+"-allContent").height();h>=f?t("#"+l+"-allContent").css({height:h+"px"}):t("#"+l+"-allContent").css({height:"auto"})}A(l)},F=function(l){var a="",s=o.showmode;if(1==c&&(s="table"),0==c&&"list"!=s&&"html"!=s&&(s="list"),"list"==s){if(e.length>0){a="",D=0;for(var r=$<u?$:u,d=o.tolist,h=o.toimg,f=o.trufalse,p=o.action,m=v;m<r;m++){var _=e[m];a+='<dl class="tomylist dl-horizontal"'+(_?.color!==void 0?' data-color="'+_.color+'"':"")+(_?.ID!==void 0?' data-id="'+_.ID+'"':"")+">";for(var x=0;x<i.length;x++){D=x+1;var w=_?.[i[x]];if(hide_cls="",n.indexOf(i[x])>=0&&void 0!==w){if(a+='<dt class="column100 column'+D+hide_cls+'" data-column="column'+D+'" data-label="'+i[x]+'">'+i[x]+'</dt><dd class="column100 column'+D+hide_cls+'" data-column="column'+D+'" data-label="'+i[x]+'">',p.indexOf(i[x])>=0){if(void 0===w){var y=w;a+='<a id="'+y.id+'" href="javascript:'+y.click+';" class="apollonbtn btn-'+y.color+'">'+y.content+"</a>"}else for(var C=0;C<w.length;C++){var y=w[C];y?.tooltip!==void 0?a+='<a id="'+y.id+"-"+y.toolid+'" data-url="sources/ajax/load/'+y.tooltip+'.php" data-id="'+y.toolid+'" data-val="0" href="'+y.click+'" target="_blank" class="apollonbtn btn-'+y.color+' tooltipster">'+y.content+"</a>":a+='<a id="'+y.id+'" href="javascript:'+y.click+';" class="apollonbtn btn-'+y.color+'">'+y.content+"</a>"}}else if(d.indexOf(i[x])>=0){a+='<ul class="'+l+'-list">';for(var C=0;C<w.length;C++){var y=w[C];a+="<li>"+y+"</li>"}a+="</ul>"}else if(h.indexOf(i[x])>=0){var k=w?.src!==void 0?' src="'+w.src+'"':"",O=w?.alt!==void 0?' alt="'+w.alt+'"':"",I=w?.id!==void 0?' id="'+w.id+'"':"",j=w?.class!==void 0?' class="'+w.class+" "+l+'-image"':' class="'+l+'-image"';a+="<img"+k+O+I+j+" />"}else f.indexOf(i[x])>=0?a+=!0===w?'<i class="apollon-ok-circled"></i>':'<i class="apollon-circle-empty"></i>':a+=w;a+="</dd>"}}a+='</dl><hr class="small-hr"/>'}t("#"+l+"-allContent").html(a),t("#"+l+"-txt3").html(lng.show_2+" "+v+" "+lng.tooo_1+" "+r+" "+lng.ooof_1+" "+u+" "+lng.line_2)}else a='<hr class="small-hr" /><dl class="tomylist dl-horizontal" wfd-id="10"><dt>!!!</dt><dd>'+lng.nodata+'</dd></dl><hr class="small-hr" />',t("#"+l+"-txt3").html(lng.nodata),t("#"+l+"-allContent").html(a)}else if("html"==s){t("#"+l+"-allContent").html('<div id="'+l+'x" class="row nomarg"></div>'),t("#"+l+"x").addClass("row nomarg");var S=o.showcode;a="",D=0;for(var r=$<u?$:u,d=o.tolist,h=o.toimg,f=o.trufalse,p=o.action,m=v;m<r;m++){for(var _=e[m],q=S,x=0;x<i.length;x++){D=x+1;var w=_[i[x]];q=q.replaceAll("["+i[x].toUpperCase()+"]",w)}a+=q}t("#"+l+"x").html(a),e.length>0||(a='<hr class="small-hr" /><dl class="tomylist dl-horizontal" wfd-id="10"><dt>!!!</dt><dd>'+lng.nodata+'</dd></dl><hr class="small-hr" />',t("#"+l+"-txt3").html(lng.nodata),t("#"+l+"-allContent").html(a))}else{a+='<table id="'+l+'table" class="table table-apollon table-striped table-sm" data-vertable="tomythem-'+o.theme+'"><thead><tr class="row100 head">';for(var D=0,N=o.hide_sm,E=o.hide_md,m=0;m<i.length;m++){D=m+1;var L="";i[m]==b&&(L=0==g?" tobot":" totop"),hide_cls="",N.indexOf(i[m])>=0&&(hide_cls+=" hidden-sm"),E.indexOf(i[m])>=0&&(hide_cls+=" hidden-md"),n.indexOf(i[m])>=0&&(a+='<th class="column100 column'+D+L+hide_cls+'" data-column="column'+D+'" scope="col">'+i[m]+"</th>")}a+='</tr></thead><tfoot><tr class="row100 foot">';for(var D=0,N=o.hide_sm,E=o.hide_md,m=0;m<i.length;m++){D=m+1;var L="";i[m]==b&&(L=0==g?" tobot":" totop"),hide_cls="",N.indexOf(i[m])>=0&&(hide_cls+=" hidden-sm"),E.indexOf(i[m])>=0&&(hide_cls+=" hidden-md"),n.indexOf(i[m])>=0&&(a+='<th class="column100 column'+D+L+hide_cls+'" data-column="column'+D+'" scope="col">'+i[m]+"</th>")}if(a+="</tr></tfoot><tbody></tbody></table>",t("#"+l+"-allContent").html(a),e.length>0){a="",D=0;for(var r=$<u?$:u,d=o.tolist,h=o.toimg,f=o.trufalse,p=o.action,m=v;m<$;m++){var _=e[m];a+='<tr class="row100"'+(_?.color!==void 0?' data-color="'+_.color+'"':"")+(_?.ID!==void 0?' data-id="'+_.ID+'"':"")+">";for(var x=0;x<i.length;x++){D=x+1;var w=_?.[i[x]];if(hide_cls="",N.indexOf(i[x])>=0&&(hide_cls+=" hidden-sm"),E.indexOf(i[x])>=0&&(hide_cls+=" hidden-md"),n.indexOf(i[x])>=0&&void 0!==w){if(a+='<td class="column100 column'+D+hide_cls+'" data-column="column'+D+'" data-label="'+i[x]+'">',p.indexOf(i[x])>=0){if(void 0===w){var y=w;a+='<a id="'+y.id+'" href="javascript:'+y.click+';" class="apollonbtn btn-'+y.color+'">'+y.content+"</a>"}else for(var C=0;C<w.length;C++){var y=w[C];y?.tooltip!==void 0?a+='<a id="'+y.id+"-"+y.toolid+'" data-url="sources/ajax/load/'+y.tooltip+'.php" data-id="'+y.toolid+'" data-val="0" href="'+y.click+'" target="_blank" class="apollonbtn btn-'+y.color+' tooltipster">'+y.content+"</a>":a+='<a id="'+y.id+'" href="javascript:'+y.click+';" class="apollonbtn btn-'+y.color+'">'+y.content+"</a>"}}else if(d.indexOf(i[x])>=0){a+='<ul class="'+l+'-list">';for(var C=0;C<w.length;C++){var y=w[C];a+="<li>"+y+"</li>"}a+="</ul>"}else if(h.indexOf(i[x])>=0){var k=w?.src!=="undefined"?' src="'+w.src+'"':"",O=w?.alt!=="undefined"?' alt="'+w.alt+'"':"",I=w?.id!=="undefined"?' id="'+w.id+'"':"",j=w?.class!=="undefined"?' class="'+w.class+" "+l+'-image"':' class="'+l+'-image"';a+="<img"+k+O+I+j+" />"}else f.indexOf(i[x])>=0?a+=!0===w?'<i class="apollon-ok-circled"></i>':'<i class="apollon-circle-empty"></i>':a+=w;a+="</td>"}}a+="</tr>"}t("#"+l+"-allContent table tbody").html(a),t("#"+l+"-txt3").html(lng.show_2+" "+v+" "+lng.tooo_1+" "+r+" "+lng.ooof_1+" "+u+" "+lng.line_2)}else a='<tr class="row100"><td class="column100 column1" data-column="column1" colspan="'+t("#"+l+"-allContent table thead tr th").length+'">'+lng.nodata+"</td></td>",t("#"+l+"-allContent table tbody").html(a),t("#"+l+"-txt3").html(lng.nodata),t("#"+l+" tbody").html(a)}t("#"+l+"-allContent").css({height:"auto"}),t("#"+l+"-filters").addClass("hidden"),A(l);var T=t("#"+l+"apollon-sidebar").height(),F=t("#"+l+"-allContent").height();T>=F?t("#"+l+"-allContent").css({height:T+"px"}):t("#"+l+"-allContent").css({height:"auto"})},A=function(l){var a=1,e=1,i=f-2,n=o.pagination;f<6?(a=1,e=f):p<5?(a=1,e=5):p>=i?(a=f-4,e=f):(a=p-2,e=p+2);for(var s='<div class="pagination p'+[1,1,2,3,9,10,12][n]+'"><ul>',r=a;r<=e;r++)s+="<a"+(r==p?' class="is-active"':"")+' href="javascript:;" name="'+r+'">'+r+"</a>";s+="</ul></div>",1==f&&(s=""),t("#"+l+"-txt4").html(s),j(l)},B=function(l){var n=o.filters,s=n.length>0;if(s)for(var r=0;r<n.length;r++)d[n[r]]=[];t.post(o.ajaxurl,o.data,function(r){if(/^{.*}$/.test(r)&&"object"==typeof(r=JSON.parse(r))){r.data,a=r.data;for(var c=0;c<a.length;c++){var h=a[c];if(s)for(var b=0;b<i.length;b++)n.indexOf(i[b])>-1&&0>d[i[b]].indexOf(h[i[b]])&&d[i[b]].push(h[i[b]])}e=a;for(var g=t(this).find("thead tr th"),c=0;c<g.length;c++)i.push(t(g[c]).html());f=Math.ceil((u=a.length)/m),p=1,v=0,$=u>m?m:u,E(l),(0,o.callbackAjax)(a)}})},M=function(t){0==c&&J(t);var l=window.open("","","height=400,width=600");l.document.write("<html><head><title>Apollon</title>"),l.document.write('<style type = "text/css">'),l.document.write("body{font-family: Arial;font-size: 10pt;}table{border: 1px solid #ccc;border-collapse: collapse;}table th{background-color: #F7F7F7;color: #333;font-weight: bold;}table th, table td{padding: 5px;border: 1px solid #ccc;}"),l.document.write("</style>"),l.document.write("</head>"),l.document.write("<body>");var o=document.getElementById(t+"table").innerHTML;l.document.write('<table cellspacing="0" rules="all" border="1">'+o+"</table>"),l.document.write("</body>"),l.document.write("</html>"),l.document.close(),l.print()},Q=function(l){0==c&&J(l),jQuery().tableExport?t("#"+l+"table").tableExport({type:"csv",csvSeparator:";",displayTableName:!0,fileName:o.tableName}):G(lng.noexport)},V=function(l){0==c&&J(l),jQuery().tableExport?t("#"+l+"table").tableExport({type:"excel",displayTableName:!0,fileName:o.tableName,mso:{fileFormat:"xlsxhtml"}}):G(lng.noexport)},P=function(l){0==c&&J(l),jQuery().tableExport?t("#"+l+"table").tableExport({type:"excel",displayTableName:!0,fileName:o.tableName,mso:{fileFormat:"xmlss",worksheetName:["TomyTable","Table 2","Table 3"]}}):G(lng.noexport)},X=function(l){0==c&&J(l),jQuery().tableExport?t("#"+l+"table").tableExport({type:"pdf",displayTableName:!0,fileName:o.tableName,jspdf:{orientation:"l",format:"a4",margins:{left:10,right:10,top:20,bottom:20},autotable:{styles:{fillColor:"inherit",textColor:"inherit"},tableWidth:"auto"}}}):G(lng.noexport)},R=function(l){0==c&&J(l),jQuery().tableExport?t("#"+l+"table").tableExport({type:"sql",displayTableName:!0,fileName:o.tableName}):G(lng.noexport)},G=function(o){var a=t("#"+l+"-filters");a.removeClass("hidden");var e='<div class="alert alert-danger"><strong>'+lng.error+"</strong> "+o+"</div>";a.html(e)},H=function(l){if(1==h){var o=t("#"+l+"-filters");o.removeClass("hidden");for(var n='<div class="col-md-12 col-sm-12 text-center" id="'+l+'-insertContent"></div><div class="col-md-3 col-sm-12"><label>'+lng.column+'<br/><select class="custom-select custom-select-sm form-control form-control-sm" id="'+l+'-insertContent-1">',s=0;s<i.length;s++)nbr=s+1,i[s]==b&&(w=0==g?" tobot":" totop"),n+='<option value="'+i[s]+'">'+i[s]+"</option>";n+='</select></label></div><div class="col-md-3 col-sm-12"><label>'+lng.operation+'<br><select class="custom-select custom-select-sm form-control form-control-sm" id="'+l+'-insertContent-2"><option value="0">=</option><option value="1">&gt;</option><option value="2">&gt;=</option><option value="3">&lt;</option><option value="4">&lt;=</option><option value="5">!=</option></select></label></div><div class="col-md-3 col-sm-12"><label>'+lng.value+'<br><input type="text" id="'+l+'-insertContent-3" class="form-control form-control-sm" placeholder="'+lng.value+'"></label></div><div class="col-md-3 col-sm-12 text-right"><button type="button" class="btn btn-primary" id="insertContent-btn">'+lng.show+"</button></div><hr/>",o.html(n),jQuery().chosen&&t("#"+l+"-insertContent-1, #"+l+"-insertContent-2").chosen({width:"100%"}),t("#insertContent-btn").unbind("click").click(function(){o.addClass("hidden");var n=t("#"+l+"-insertContent-1").val(),s=parseInt(t("#"+l+"-insertContent-2").val()),r=parseFloat(t("#"+l+"-insertContent-3").val());e=[],u=a.length;for(var d=0,c=0;c<u;c++)for(var h=a[c],b=0;b<i.length;b++){var g=h[i[b]];tm.indexOf(i[b])&&(g=h["sort_"+i[b]]),i[b]==n&&(g=(g=g?.toString()||g)?.replace(" ","")||g,g=parseFloat(g="string"==typeof notag?g.replace(/<\/?[^>]+(>|$)/g,""):g),(0==s&&g==r||1==s&&g>r||2==s&&g>=r||3==s&&g<r||4==s&&g<=r||5==s&&g!=r)&&(e.push(a[c]),d++))}f=Math.ceil((u=d)/m),p=1,($=(v=0)+parseInt(m))>u&&($=u),F(l)})}},U=function(l){var e=t("#"+l+"-filters"),n="",s="";e.removeClass("hidden");for(var r=0;r<i.length;r++)s+='<option value="'+i[r]+'">'+i[r]+"</option>";n+='<div class="col-md-12 col-sm-12 text-center" id="'+l+'-insertContent"></div><div class="col-md-2 col-sm-12"></div>',n+='<div class="col-md-5 col-sm-12"><label>'+lng.column+'<br/><select class="custom-select custom-select-sm form-control form-control-sm" multiple id="'+l+'-insertContent-1">'+s+"</select></label></div>",n+='<div class="col-md-2 col-sm-12"></div><div class="col-md-3 col-sm-12 text-right"><button type="button" class="btn btn-primary" id="insertContent-btn">'+lng.show+"</button></div><hr/>",e.html(n),jQuery().chosen&&t("#"+l+"-insertContent-1").chosen({width:"100%"}),t("#insertContent-btn").unbind("click").click(function(){e.addClass("hidden");var i=t("#"+l+"-insertContent-1").val();o.filters=i,d={};for(var n=0;n<i.length;n++)d[i[n]]=[];u=a.length;for(var s={},r=0;r<a.length;r++)for(var c=a[r],n=0;n<i.length;n++)0>d[i[n]].indexOf(c[i[n]])&&(d[i[n]].push(c[i[n]]),s[i[n]]=s[i[n]]+1);E(l)})},Y=function(l){if(1==h){var o=t("#"+l+"-filters");o.removeClass("hidden");for(var a="",n="",s="",d=0;d<r.length;d++)a+='<option value="'+r[d]+'">'+r[d]+"</option>";for(var d=0;d<i.length;d++)n+='<option value="'+i[d]+'">'+i[d]+"</option>";a+='<option value="count">'+lng.count+"</option>",s+='<div class="col-md-12 col-sm-12 text-center" id="'+l+'-insertContentsta"></div>',s+='<div class="col-md-3 col-sm-12"><label>'+lng.abscis+'<br/><select class="custom-select custom-select-sm form-control form-control-sm" id="'+l+'-drawgraph-1">'+n+"</select></label></div>",s+='<div class="col-md-3 col-sm-12"><label>'+lng.coordo+'<br><select class="custom-select custom-select-sm form-control form-control-sm" id="'+l+'-drawgraph-2" multiple>'+a+"</select></label></div>",s+='<div class="col-md-3 col-sm-12"><label>'+lng.typ+'<br><select class="custom-select custom-select-sm form-control form-control-sm" id="'+l+'-drawgraph-3"><option value="0">'+lng.points+'</option><option value="1">'+lng.lines+'</option><option value="2">'+lng.lines_bg+'</option><option value="3">'+lng.lines_step+'</option><option value="4">'+lng.bars+"</option></select></label></div>",s+='<div class="col-md-3 col-sm-12 text-right"><button type="button" class="btn btn-primary" id="drawgraph-btn">'+lng.draw+"</button></div><hr/>",o.html(s),jQuery().chosen&&t("#"+l+"-drawgraph-1, #"+l+"-drawgraph-2, #"+l+"-drawgraph-3").chosen({width:"100%"}),t("#drawgraph-btn").unbind("click").click(function(){var o=t("#"+l+"-drawgraph-1").val(),a=t("#"+l+"-drawgraph-2").val(),n=t("#"+l+"-drawgraph-3").val();if(null!==a){t("#"+l+"-insertContentsta").html('<div class="drawgraph-flot-prnt"><div id="drawgraph-flot" class="drawgraph-flot"></div></div>');var s=[],r=[],d=[],c=0,h=0,f={},p=[];if(a?.[0]=="count"){for(var m=0;m<u;m++)for(var v=0;v<i.length;v++){var $=e[m];if(i[v]==o){var b=$[i[v]];b="string"==typeof b?b.replace(/<\/?[^>]+(>|$)/g,""):b,p.indexOf(b)>-1?f[b]=f[b]+1:(p.push(b),f[b]=1)}}var g,m=0;for(var _ in f)g=f[_],s.push([m,_]),d.push([m,g]),g>h&&(h=g+.2*g),m++;r.push({label:o,data:d})}else for(var m=0;m<u;m++)for(var $=e[m],v=0;v<i.length;v++){var x=$[i[v]];if(i[v]==o){var b=$[i[v]];b="string"==typeof b?b.replace(/<\/?[^>]+(>|$)/g,""):b,s.push([m,b])}a.indexOf(i[v])>=0&&(d?.[v]===void 0&&(d[v]=[]),tm.indexOf(i[v])&&(x=$["sort_"+i[v]]),x=parseFloat(x="string"==typeof(x=(x=x?.toString()||x)?.replace(" ","")||x)?x.replace(/<\/?[^>]+(>|$)/g,""):x),d[v].push([m,x]),x>h&&(h=x+.2*x),0==c?c=x:x<c&&(c=x-.2*x))}for(var v=0;v<i.length;v++)a.indexOf(i[v])>=0&&r.push({label:i[v],data:d[v]});t.plot("#drawgraph-flot",r,{series:[{points:{show:!0}},{points:{show:!0},lines:{show:!0}},{points:{show:!0},lines:{show:!0,fill:!0}},{lines:{show:!0,steps:!0,fill:!0}},{bars:{show:!0}}][n],xaxis:{ticks:s},yaxis:{min:c,max:h}}),t("<div id='apollontooltip'></div>").css({position:"absolute",display:"none",border:"1px solid #fdd",padding:"2px","z-index":9999999999,"background-color":"#fee",opacity:.8}).appendTo("body"),t("#drawgraph-flot").bind("plothover",function(l,o,a){if(console.log(l,o,a),a){var e=a.datapoint[0].toFixed(2),i=a.datapoint[1].toFixed(2);t("#apollontooltip").html(a.series.label+": "+e+" = "+i).css({top:a.pageY+5,left:a.pageX+5}).fadeIn(200)}else t("#apollontooltip").hide()})}})}},J=function(l){var o="";o=0==(c=1-c)?'<i class="apollon-table"></i> '+lng.tablemod:'<i class="apollon-list-bullet"></i> '+lng.listmod,t("#"+l+"-listable").html(o),"undefined"!=typeof Storage&&window.localStorage.setItem("apollontable_"+tc+"_s",c),F(l)},W=function(l){if(1==h){var o,a,n=0,s={sum:{},avg:{},max:{},min:{},ext:{},nbr:{},q1:{},q2:{},q3:{},iqr:{}},d={},c={sum:lng.sum,avg:lng.avg,max:lng.max,min:lng.min,nbr:lng.nbr,ext:lng.ext,q1:lng.q1,q2:lng.q2,q3:lng.q3,iqr:lng.iqr},f=t("#"+l+"-filters");f.removeClass("hidden");for(var p='<div class="col-md-12 col-sm-12 text-center" id="tomytable-insertContent"><table class="result-table"><thead><tr><th scope="col">-</th>',m=0;m<r.length;m++)p+='<th scope="col">'+r[m]+"</th>",s.sum[r[m]]=0,s.avg[r[m]]=0,s.max[r[m]]=0,s.ext[r[m]]=0,s.min[r[m]]=null,d[r[m]]=[],s.q1[r[m]]=null,s.q2[r[m]]=null,s.q3[r[m]]=null,s.iqr[r[m]]=null;p+="</tr></thead><tbody>";for(var u=0;u<e.length;u++){n++;for(var m=0;m<r.length;m++)o=e[u][r[m]],tm.indexOf(i[u])&&(o=e[u]["sort_"+r[m]]),o=parseFloat(o=(o=(o="string"==typeof o?o.replace(/<\/?[^>]+(>|$)/g,""):o)?.toString()||o)?.replace(" ","")||o),s.nbr[r[m]]=n,s.sum[r[m]]+=o,o>s.max[r[m]]&&(s.max[r[m]]=o),1==n?s.min[r[m]]=o:o<s.min[r[m]]&&(s.min[r[m]]=o),d[r[m]].push(o)}for(var v=Math.ceil(n/4)-1,$=Math.floor(3*n/4)-1,m=0;m<r.length;m++){var b=d[r[m]];if(b=b.sort(function(t,l){return t-l}),s.ext[r[m]]=parseFloat(s.max[r[m]])-parseFloat(s.min[r[m]]),s.avg[r[m]]=parseFloat(s.sum[r[m]])/n,s.q1[r[m]]=parseFloat(b[v]),s.q3[r[m]]=parseFloat(b[$]),s.iqr[r[m]]=parseFloat(b[$])-parseFloat(b[v]),n%2==1){var g=(n+1)/2-1;s.q2[r[m]]=parseFloat(b[g])}else{var _=n/2-1,x=_+1;s.q2[r[m]]=(parseFloat(b[_])+parseFloat(b[x]))/2}}for(z in s){a=s[z],p+="<tr><th>"+c[z]+"</th>";for(var m=0;m<r.length;m++)p+="<td>"+(isNaN(a[r[m]])?"/":Math.round(100*a[r[m]])/100)+"</td>";p+="</tr>"}p+="</tbody></table><hr/></div>",f.html(p)}},K=function(){return a},Z=function(){return e},tt=function(t){for(var l,o={},e=0;e<a.length;e++)(l=a[e])?.ID!==void 0&&l?.ID==t&&(o=l),l?.id!==void 0&&l?.id==t&&(o=l);return o},tl=function(t,l){for(var o,e=null,i=0;i<a.length;i++)(o=a[i])?.ID!==void 0&&o?.ID==t&&(e=o?.[l]),o?.id!==void 0&&o?.id==t&&(e=o?.[l]);return e},to=function(){"ajax"==o.datatype?B(l):(e=a,f=Math.ceil((u=a.length)/m),p=1,v=0,$=u>m?m:u,E(l))},ta=function(t,l){for(var o,e=!1,i=0;i<a.length;i++)((o=a[i])?.ID!==void 0&&o?.ID==t||o?.id!==void 0&&o?.id==t)&&(a[i]=l,e=!0);return e},te=function(t,l){return a.push(t),!0===l&&to(),!0},ti=function(t,l,o){for(var e,i=!1,n=0;n<a.length;n++)((e=a[n])?.ID!==void 0&&e?.ID==t||e?.id!==void 0&&e?.id==t)&&(a[n][l]=o,i=!0);return i},tn=function(t){for(var l,o=[],e=!1,i=0;i<a.length;i++)((l=a[i])?.ID!==void 0&&l?.ID!=t||l?.id!==void 0&&l?.id!=t)&&(o.push(a[i]),e=!0);return a=o,e},ts=function(t,l){for(var o,e=!1,i=0;i<a.length;i++)((o=a[i])?.ID!==void 0&&o?.ID==t||o?.id!==void 0&&o?.id==t)&&(tp.indexOf(l)?a[i][l]=0:a[i][l]="",e=!0);return e},tr=o.lang;lng="en"==tr?o.english:lng[tr],("ar"==tr||"iw"==tr)&&t("head").append('<link rel="stylesheet" href="'+o.distloc+'css/rtl-apollon.min.css" type="text/css" />');var td=o.columns,tc=o.tableID;if(td.length>0)i=td,n=td,s=td;else{for(var th=t(this).find("thead tr th"),tf=0;tf<th.length;tf++)i.push(t(th[tf]).html());o.columns=i,n=i,s=i}for(var tp=o.sortnbr,tm=o.specialsort,tf=0;tf<i.length;tf++)(tp.indexOf(i[tf])>=0||tm.indexOf(i[tf])>=0)&&r.push(i[tf]);if(r.length>0&&(h=1),c="list"==o.showmode||"html"==o.showmode?0:1,t(this).attr("data-vertable",o.theme),t(this).parent().addClass(o.theme),"html"==o.datatype){var tu='<thead><tr class="row100 head"><th class="column100 column1" data-column="column1" scope="col">'+lng.loading+'</th></tr></thead><tfoot><tr class="row100 foot"><th class="column100 column1" data-column="column1" scope="col">'+lng.loading+"</th></tr></tfoot><tbody><tr><td>"+(0==o.loading?'<div class="pdfifty"><div class="loading"><span>'+o.loadtxt+"</span></div></div>":'<div class="tt-loading-bg" name="'+y[o.loading].color+'"><div><img src="'+o.distloc+"svg-loaders/"+y[o.loading].file+'.svg" width="'+y[o.loading].width+'" alt=""></div></div>')+"</td></tr></tbody>";t("#"+l).html(tu);var tv=o.filters,x=tv.length>0,t$=t(this).find("tbody tr");if(x)for(var tf=0;tf<tv.length;tf++)d[tv[tf]]=[];for(var tf=0;tf<t$.length;tf++){for(var tb=t(t$[tf]).find("td"),tg={},t_=0;t_<tb.length;t_++)tg[i[t_]]=t(tb[t_]).html(),tg[i[t_]]=tg[i[t_]].replace(/(\r\n|\n|\r| )/gm,"");e.push(tg),a.push(tg),u++}u<m?(f=1,$=u):(f=Math.ceil(u/m),$=m);for(var tf=0;tf<a.length;tf++){var tx=a[tf];if(x)for(var tw=0;tw<i.length;tw++)tv.indexOf(i[tw])>-1&&0>d[i[tw]].indexOf(tx[i[tw]])&&d[i[tw]].push(tx[i[tw]])}E(l),(callback=o.callback)(a)}else if("js"==o.datatype){var tu='<thead><tr class="row100 head"><th class="column100 column1" data-column="column1" scope="col">'+lng.loading+'</th></tr></thead><tfoot><tr class="row100 foot"><th class="column100 column1" data-column="column1" scope="col">'+lng.loading+"</th></tr></tfoot><tbody><tr><td>"+(0==o.loading?'<div class="pdfifty"><div class="loading"><span>'+o.loadtxt+"</span></div></div>":'<div class="tt-loading-bg" name="'+y[o.loading].color+'"><div><img src="'+o.distloc+"svg-loaders/"+y[o.loading].file+'.svg" width="'+y[o.loading].width+'" alt=""></div></div>')+"</td></tr></tbody>";t("#"+l).html(tu);var tv=o.filters,x=tv.length>0;if(x)for(var tf=0;tf<tv.length;tf++)d[tv[tf]]=[];a=o.data,e=o.data,(u=a.length)<m?(f=1,$=u):(f=Math.ceil(u/m),$=m);for(var tf=0;tf<a.length;tf++){var tx=a[tf];if(x)for(var tw=0;tw<i.length;tw++)tv.indexOf(i[tw])>-1&&0>d[i[tw]].indexOf(tx[i[tw]])&&d[i[tw]].push(tx[i[tw]])}E(l),(callback=o.callback)(a)}else if("ajax"==o.datatype){var tu='<thead><tr class="row100 head"><th class="column100 column1" data-column="column1" scope="col">'+lng.loading+'</th></tr></thead><tfoot><tr class="row100 foot"><th class="column100 column1" data-column="column1" scope="col">'+lng.loading+"</th></tr></tfoot><tbody><tr><td>"+(0==o.loading?'<div class="pdfifty"><div class="loading"><span>'+o.loadtxt+"</span></div></div>":'<div class="tt-loading-bg" name="'+y[o.loading].color+'"><div><img src="'+o.distloc+"svg-loaders/"+y[o.loading].file+'.svg" width="'+y[o.loading].width+'" alt=""></div></div>')+"</td></tr></tbody>";t("#"+l).html(tu),B(l)}else{var tu='<thead><tr class="row100 head"><th class="column100 column1" data-column="column1" scope="col">'+lng.loading+'</th></tr></thead><tfoot><tr class="row100 foot"><th class="column100 column1" data-column="column1" scope="col">'+lng.loading+"</th></tr></tfoot><tbody><tr><td>"+(0==o.loading?'<div class="pdfifty"><div class="loading"><span>'+o.loadtxt+"</span></div></div>":'<div class="tt-loading-bg" name="'+y[o.loading].color+'"><div><img src="'+o.distloc+"svg-loaders/"+y[o.loading].file+'.svg" width="'+y[o.loading].width+'" alt=""></div></div>')+"</td></tr></tbody>";t("#"+l).html(tu),a=[],e=[],i=[],f=0,p=1,m=10,u=0,v=0,$=0,b=0,g=0,_="",E(l),(callback=o.callback)(a)}if("undefined"!=typeof Storage){c=window.localStorage.getItem("apollontable_"+tc+"_s"),g=window.localStorage.getItem("apollontable_"+tc+"_o"),b=window.localStorage.getItem("apollontable_"+tc+"_c"),m=window.localStorage.getItem("apollontable_"+tc+"_n");var ty=o.toshow;m||(m=ty[0]),_=window.localStorage.getItem("apollontable_"+tc+"_r"),(p=window.localStorage.getItem("apollontable_"+tc+"_p"))||(p=1)}this.getTable=function(){return K()},this.getFiltredTable=function(){return Z()},this.getLine=function(t){return tt(t)},this.getColumn=function(t,l){return tl(t,l)},this.refresh=function(){to()},this.editLine=function(t,l){return ta(t,l)},this.addLine=function(t,l){return te(t,l)},this.editColumn=function(t,l,o){return ti(t,l,o)},this.removeLine=function(t){return tn(t)},this.removeColumn=function(t,l){return ts(t,l)},this.setFilter=function(t,l){I(t,l)},this.xsort=function(t,o){k(l,t,o)}})}}(jQuery):console.error(">> jQuery.js is required to use ApollonJS !! <<");